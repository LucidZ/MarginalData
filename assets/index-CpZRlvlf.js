import{r as R,j as o}from"./index-hc7qzOw9.js";import{a as x,b as A,u as p}from"./transform-C8bpREox.js";import{i as G,m as M,l as E,d as L,f as T}from"./linear-CQBXhHNH.js";class k extends Map{constructor(n,r=H){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),n!=null)for(const[t,s]of n)this.set(t,s)}get(n){return super.get(v(this,n))}has(n){return super.has(v(this,n))}set(n,r){return super.set($(this,n),r)}delete(n){return super.delete(z(this,n))}}function v({_intern:e,_key:n},r){const t=n(r);return e.has(t)?e.get(t):r}function $({_intern:e,_key:n},r){const t=n(r);return e.has(t)?e.get(t):(e.set(t,r),r)}function z({_intern:e,_key:n},r){const t=n(r);return e.has(t)&&(r=e.get(t),e.delete(t)),r}function H(e){return e!==null&&typeof e=="object"?e.valueOf():e}function K(e,n,r){e=+e,n=+n,r=(s=arguments.length)<2?(n=e,e=0,1):s<3?1:+r;for(var t=-1,s=Math.max(0,Math.ceil((n-e)/r))|0,i=new Array(s);++t<s;)i[t]=e+t*r;return i}const S=Symbol("implicit");function I(){var e=new k,n=[],r=[],t=S;function s(i){let c=e.get(i);if(c===void 0){if(t!==S)return t;e.set(i,c=n.push(i)-1)}return r[c%r.length]}return s.domain=function(i){if(!arguments.length)return n.slice();n=[],e=new k;for(const c of i)e.has(c)||e.set(c,n.push(c)-1);return s},s.range=function(i){return arguments.length?(r=Array.from(i),s):r.slice()},s.unknown=function(i){return arguments.length?(t=i,s):t},s.copy=function(){return I(n,r).unknown(t)},G.apply(s,arguments),s}function N(){var e=I().unknown(void 0),n=e.domain,r=e.range,t=0,s=1,i,c,m=!1,d=0,h=0,g=.5;delete e.unknown;function l(){var a=n().length,D=s<t,f=D?s:t,O=D?t:s;i=(O-f)/Math.max(1,a-d+h*2),m&&(i=Math.floor(i)),f+=(O-f-i*(a-d))*g,c=i*(1-d),m&&(f=Math.round(f),c=Math.round(c));var y=K(a).map(function(j){return f+i*j});return r(D?y.reverse():y)}return e.domain=function(a){return arguments.length?(n(a),l()):n()},e.range=function(a){return arguments.length?([t,s]=a,t=+t,s=+s,l()):[t,s]},e.rangeRound=function(a){return[t,s]=a,t=+t,s=+s,m=!0,l()},e.bandwidth=function(){return c},e.step=function(){return i},e.round=function(a){return arguments.length?(m=!!a,l()):m},e.padding=function(a){return arguments.length?(d=Math.min(1,h=+a),l()):d},e.paddingInner=function(a){return arguments.length?(d=Math.min(1,a),l()):d},e.paddingOuter=function(a){return arguments.length?(h=+a,l()):h},e.align=function(a){return arguments.length?(g=Math.max(0,Math.min(1,a)),l()):g},e.copy=function(){return N(n(),[t,s]).round(m).paddingInner(d).paddingOuter(h).align(g)},G.apply(l(),arguments)}const U=x(null),B=x("ODA"),F=x(".2s"),W=x(null),w=x(null),b=x(!1),C=x(0),X=()=>{const[e,n]=A(U),r=[{Country:"United States",ODA:64.69,ODAPercent:.0024},{Country:"Germany",ODA:37.9,ODAPercent:.0082},{Country:"Japan",ODA:19.6,ODAPercent:.0044},{Country:"United Kingdom",ODA:19.07,ODAPercent:.0058},{Country:"France",ODA:15.05,ODAPercent:.0048},{Country:"Canada",ODA:7.97,ODAPercent:.0038},{Country:"Netherlands",ODA:7.36,ODAPercent:.0066},{Country:"Italy",ODA:6.12,ODAPercent:.0027},{Country:"Sweden",ODA:5.62,ODAPercent:.0093},{Country:"Norway",ODA:5.55,ODAPercent:.0109},{Country:"Switzerland",ODA:5.22,ODAPercent:.006},{Country:"Spain",ODA:3.88,ODAPercent:.0024},{Country:"Australia",ODA:3.25,ODAPercent:.0019},{Country:"Korea",ODA:3.16,ODAPercent:.0017},{Country:"Denmark",ODA:3.06,ODAPercent:.0073},{Country:"Ireland",ODA:2.82,ODAPercent:.0067},{Country:"Belgium",ODA:2.81,ODAPercent:.0044},{Country:"Poland",ODA:2.58,ODAPercent:.0033},{Country:"Austria",ODA:1.96,ODAPercent:.0038},{Country:"Finland",ODA:1.59,ODAPercent:.0054},{Country:"Czechia",ODA:.81,ODAPercent:.0024},{Country:"New Zealand",ODA:.76,ODAPercent:.0031},{Country:"Luxembourg",ODA:.58,ODAPercent:.0099},{Country:"Portugal",ODA:.53,ODAPercent:.0019},{Country:"Greece",ODA:.33,ODAPercent:.0014},{Country:"Hungary",ODA:.27,ODAPercent:.0013},{Country:"Lithuania",ODA:.21,ODAPercent:.003},{Country:"Slovak Republic",ODA:.18,ODAPercent:.0014},{Country:"Slovenia",ODA:.16,ODAPercent:.0024},{Country:"Iceland",ODA:.11,ODAPercent:.0035},{Country:"Estonia",ODA:.11,ODAPercent:.0028}];return R.useEffect(()=>{n(r)},[]),e},J=({xScale:e,innerHeight:n,tickFormat:r})=>e.ticks(4).map(t=>o.jsxs("g",{className:"tick",transform:`translate(${e(t)},0)`,children:[o.jsx("line",{x1:0,y1:0,x2:0,y2:n}),o.jsx("text",{style:{textAnchor:"middle"},y:n+5,dy:".71em",children:r(t)})]},t)),Q=({yScale:e})=>p(b)===!1?null:o.jsx(o.Fragment,{children:e.domain().map((r,t)=>o.jsx("g",{className:"tick",children:o.jsx("text",{style:{textAnchor:"end"},dy:".32em",x:-5,y:e(r)+e.bandwidth()/2,children:r})},t))}),Y=({graphId:e,data:n,xScale:r,yScale:t,xValue:s,yValue:i,toolTipFormat:c})=>{const[m,d]=A(w),[h,g]=A(W),l=p(b),[a,D]=A(C),f=u=>m===i(u)||h===i(u)||a===2&&i(u)==="United States"||a===5&&i(u)==="United States"?"green":"#D3D3D3",O=u=>m===i(u)||h===i(u)?"black":"transparent",y=M(n,s),j=u=>({onMouseOver:()=>g(u),onMouseOut:()=>g(null),onClick:()=>{m===null&&D(a+1),d(u)}});return n.map(u=>{const P=i(u);return o.jsxs("g",{...l?{}:j(P),style:{cursor:"pointer"},children:[o.jsx("rect",{x:0,y:t(i(u)),width:r(y),height:t.bandwidth(),fill:"transparent"}),o.jsx("rect",{className:"mark",x:0,y:t(i(u)),width:r(s(u)),height:t.bandwidth(),style:{fill:f(u)},children:o.jsx("title",{children:c(s(u))})},i(u)),o.jsx("text",{textAnchor:"right",x:r(s(u)),y:t(i(u))+13,style:{fill:O(u)},children:"- Your Guess"})]},P)})},Z=({innerWidth:e,innerHeight:n})=>p(C)<3?o.jsx("text",{className:"axis-label",x:e/2,y:n+60,textAnchor:"middle",children:"Billions of US Dollars"}):o.jsx("text",{className:"axis-label",x:e/2,y:n+60,textAnchor:"middle",children:"% of Gross National Income"}),q=({graphId:e,width:n,height:r,margin:t,data:s,yValue:i,xValue:c,siFormat:m,xAxisTickFormat:d})=>{const h=r-t.top-t.bottom,g=n-t.left-t.right,l=N().domain(s.map(i)).range([0,h]).paddingInner(.1),a=E().domain([0,M(s,c)]).range([0,g]);return p(b),o.jsx("svg",{width:n,height:r,children:o.jsxs("g",{transform:`translate(${t.left},${t.top})`,children:[o.jsx(J,{xScale:a,innerHeight:h,tickFormat:d}),o.jsx(Q,{yScale:l}),o.jsx(Z,{innerWidth:g,innerHeight:h}),o.jsx(Y,{data:s,xScale:a,yScale:l,xValue:c,yValue:i,toolTipFormat:d})]})})},_=()=>{const[e,n]=A(b),[r,t]=A(C),[s,i]=A(w),[c,m]=A(U),[d,h]=A(B),[g,l]=A(F),a=()=>{r===1&&(n(!0),t(r+1)),r===2&&(n(!1),i(null),m(c.slice().sort((D,f)=>L(D.ODAPercent,f.ODAPercent))),h("ODAPercent"),l(".1%"),t(r+1)),r===4&&(n(!0),t(r+1))};switch(r){case 0:return o.jsx("div",{children:o.jsx("button",{children:" Select a bar below first. "})});case 1:return o.jsx("div",{children:o.jsxs("button",{className:"pulse-element",onClick:a,children:[" ","Click to submit guess!"," "]})});case 2:return o.jsx("div",{children:o.jsxs("button",{className:"pulse-element",onClick:a,children:[" ","Click to consider a different context"," "]})});case 3:return o.jsx("div",{children:o.jsx("button",{children:" Select a bar first. "})});case 4:return o.jsx("div",{children:o.jsxs("button",{className:"pulse-element",onClick:a,children:[" ","Click me to submit your guess."," "]})});default:return null}},V=()=>{const e=p(C),n=p(w);switch(e){case 0:return o.jsx("h3",{children:"Below is a graph of the foreign aid given by various countries. Which bar do you think represents the United States?"});case 1:return o.jsx("h3",{children:"Below is a graph of the foreign aid given by various countries. Which bar do you think represents the United States?"});case 2:if(n==="United States")return o.jsx("h3",{children:"Correct! As the world's largest economy, it doesn't come as a surprise to you that the United States tops the foreign aid chart."});if(n!=="United States")return o.jsx("h3",{children:"Good guess, but when it comes to raw spending on foreign aid, the United States tops the charts!"});case 3:return o.jsx("h3",{children:"Below is a graph of the foreign aid given by the same countries, but this time as a % of each countries gross national income. Again, which bar do you think represents the United States?"});case 4:return o.jsx("h3",{children:"Below is a graph of the foreign aid given by the same countries, but this time as a % of each countries gross national income. Again, which bar do you think represents the United States?"});case 5:return o.jsx("h3",{children:"Despite being the worlds largest provider of foreign aid and despite all the controversy I read about in the news, I was surprised by how little US foreign aid is as a % of GNI."});default:return console.log("step default"),null}},ee=600,te=600,ne={top:20,right:120,bottom:80,left:120},re=e=>e.Country,ae=()=>{const e=X(),n=s=>s[p(B)],r=T(p(F)),t=s=>r(s).replace("G","B").replace(".0","");return e?o.jsxs("div",{className:"app-container",children:[o.jsx(V,{}),o.jsx(_,{}),o.jsx(q,{width:ee,height:te,margin:ne,data:e,yValue:re,xValue:n,siFormat:r,xAxisTickFormat:t})]}):o.jsx("pre",{children:"Data is Loading..."})};export{ae as default};
