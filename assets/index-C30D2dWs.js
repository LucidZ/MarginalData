import{r as C,j as e}from"./index-B9rqXie6.js";function F({optionAName:D,optionBName:$,setOptionAName:f,setOptionBName:M,rows:p,addRow:b,deleteRow:y,updateRow:P,activeRowId:s,setActiveRowId:m,reorderRows:N}){const[h,d]=C.useState(null),[a,x]=C.useState(null),r=(o,t)=>{d(t),o.dataTransfer.effectAllowed="move"},l=(o,t)=>{o.preventDefault(),h!==null&&h!==t&&x(t)},c=()=>{h!==null&&a!==null&&N(h,a),d(null),x(null)};return e.jsxs("div",{className:"comparison-table",children:[e.jsx("h2",{children:"Compare the Facts"}),e.jsx("p",{className:"step-description",children:"List the objective differences between your options (salary, commute time, etc.)"}),e.jsxs("div",{className:"table-headers",children:[e.jsx("span",{children:"⇅"}),e.jsx("span",{children:"Category"}),e.jsx("input",{type:"text",value:D,onChange:o=>f(o.target.value),placeholder:"e.g. Startup Job"}),e.jsx("input",{type:"text",value:$,onChange:o=>M(o.target.value),placeholder:"e.g. Current Job"}),e.jsx("span",{})]}),p.map((o,t)=>{const n={category:"e.g. Salary / Commute / Tech",optionA:"e.g. $40k / 25 min / Modern Greenfield",optionB:"e.g. $50k / 40 min / Old School Legacy"};return e.jsxs("div",{className:`table-row ${s===o.id?"active":""} ${o.chartData?"placed":""} ${h===t?"dragging":""} ${a===t?"drag-over":""}`,onClick:()=>m(o.id),draggable:!0,onDragStart:i=>r(i,t),onDragOver:i=>l(i,t),onDragEnd:c,children:[e.jsx("div",{className:"drag-handle",title:"Drag to reorder",children:"⋮⋮"}),e.jsx("input",{type:"text",value:o.category,onChange:i=>P(o.id,{category:i.target.value}),onFocus:()=>m(o.id),placeholder:n.category,onClick:i=>i.stopPropagation()}),e.jsx("input",{type:"text",value:o.optionA,onChange:i=>P(o.id,{optionA:i.target.value}),onFocus:()=>m(o.id),placeholder:n.optionA,onClick:i=>i.stopPropagation()}),e.jsx("input",{type:"text",value:o.optionB,onChange:i=>P(o.id,{optionB:i.target.value}),onFocus:()=>m(o.id),placeholder:n.optionB,onClick:i=>i.stopPropagation()}),e.jsx("button",{onClick:i=>{i.stopPropagation(),y(o.id)},title:"Delete row",children:"×"})]},o.id)}),e.jsx("button",{className:"add-row-button",onClick:b,children:"+ Add Category"})]})}function L({optionAName:D,optionBName:$,rows:f,activeRowId:M,updateChartData:p}){const b=C.useRef(null),[y,P]=C.useState({isDragging:!1,dotType:null,rowId:null}),s=60,m=600,N=600,h=m-s*2,d=N-s*2,a=f.find(t=>t.id===M),x=(t,n)=>({x:s+t*h,y:s+d-n*d}),r=(t,n)=>{const i=Math.max(0,Math.min(1,(t-s)/h)),u=Math.max(0,Math.min(1,1-(n-s)/d));return{x:i,y:u}},l=(t,n,i)=>{t.preventDefault(),t.target.setPointerCapture(t.pointerId),P({isDragging:!0,dotType:i,rowId:n})},c=t=>{var A,k;if(!y.isDragging||!y.rowId||!b.current)return;const n=b.current.getBoundingClientRect(),i=t.clientX-n.left,u=t.clientY-n.top,j=r(i,u),v=f.find(S=>S.id===y.rowId);if(!v)return;const Y=((A=v.chartData)==null?void 0:A.aPosition)||{x:.5,y:.5},X=((k=v.chartData)==null?void 0:k.bPosition)||{x:.5,y:.5};y.dotType==="a"?p(y.rowId,j,X):p(y.rowId,Y,j)},o=t=>{y.isDragging&&(t.target.releasePointerCapture(t.pointerId),P({isDragging:!1,dotType:null,rowId:null}))};return C.useEffect(()=>{a&&!a.chartData&&p(a.id,{x:.5,y:.5},{x:.5,y:.5})},[a==null?void 0:a.id]),e.jsxs("div",{className:"value-joy-chart",children:[e.jsx("h2",{children:"Map Your Feelings"}),e.jsx("p",{className:"step-description",children:"For each category, drag the dots to show how valuable it is and how it makes you feel"}),a?e.jsxs("p",{className:"instruction-text",children:["Drag the dots to position ",e.jsx("strong",{children:a.category||"this category"})," for each option"]}):e.jsx("p",{className:"instruction-text",children:"Click a category above to start mapping"}),e.jsx("div",{className:"chart-container",children:e.jsxs("svg",{ref:b,className:"chart-svg",viewBox:`0 0 ${m} ${N}`,onPointerMove:c,onPointerUp:o,onPointerLeave:o,children:[[0,.25,.5,.75,1].map(t=>e.jsxs("g",{children:[e.jsx("line",{className:"grid-line",x1:s,y1:s+d-t*d,x2:s+h,y2:s+d-t*d}),e.jsx("line",{className:"grid-line",x1:s+t*h,y1:s,x2:s+t*h,y2:s+d})]},`grid-${t}`)),e.jsx("line",{className:"axis-line",x1:s,y1:s,x2:s,y2:s+d}),e.jsx("line",{className:"axis-line",x1:s,y1:s+d,x2:s+h,y2:s+d}),e.jsx("text",{className:"axis-label",x:20,y:s+d,textAnchor:"middle",transform:`rotate(-90, 20, ${s+d})`,children:"Ugh"}),e.jsx("text",{className:"axis-label",x:20,y:s+d/2,textAnchor:"middle",transform:`rotate(-90, 20, ${s+d/2})`,children:"Neutral"}),e.jsx("text",{className:"axis-label",x:20,y:s,textAnchor:"middle",transform:`rotate(-90, 20, ${s})`,children:"Sparks Joy"}),e.jsxs("text",{className:"axis-title",x:5,y:s+d/2,textAnchor:"middle",transform:`rotate(-90, 5, ${s+d/2})`,children:[e.jsx("title",{children:"How does this make you feel emotionally?"}),"Joy →"]}),e.jsx("text",{className:"axis-label",x:s,y:N-20,textAnchor:"middle",children:"Not Valuable"}),e.jsx("text",{className:"axis-label",x:s+h/2,y:N-20,textAnchor:"middle",children:"Neutral"}),e.jsx("text",{className:"axis-label",x:s+h,y:N-20,textAnchor:"middle",children:"Very Valuable"}),e.jsxs("text",{className:"axis-title",x:s+h/2,y:N-5,textAnchor:"middle",children:[e.jsx("title",{children:"How objectively important is this factor?"}),"← Value →"]}),f.filter(t=>t.chartData&&t.id!==M).map(t=>{const n=x(t.chartData.aPosition.x,t.chartData.aPosition.y),i=x(t.chartData.bPosition.x,t.chartData.bPosition.y),u=(n.x+i.x)/2,j=(n.y+i.y)/2,v=Math.atan2(i.y-n.y,i.x-n.x)*180/Math.PI,X=v>90||v<-90?v+180:v;return e.jsxs("g",{opacity:.5,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:`gradient-${t.id}`,x1:n.x,y1:n.y,x2:i.x,y2:i.y,gradientUnits:"userSpaceOnUse",children:[e.jsx("stop",{offset:"0%",stopColor:"#4a90e2"}),e.jsx("stop",{offset:"100%",stopColor:"#ff8c42"})]})}),e.jsx("line",{className:"connecting-line",x1:n.x,y1:n.y,x2:i.x,y2:i.y,stroke:`url(#gradient-${t.id})`}),e.jsx("text",{className:"category-label",x:u,y:j+-8,textAnchor:"middle",transform:`rotate(${X}, ${u}, ${j})`,children:t.category}),e.jsx("circle",{className:"dot option-a",cx:n.x,cy:n.y,r:6}),e.jsx("circle",{className:"dot option-b",cx:i.x,cy:i.y,r:6})]},t.id)}),a&&a.chartData&&(()=>{const t=x(a.chartData.aPosition.x,a.chartData.aPosition.y),n=x(a.chartData.bPosition.x,a.chartData.bPosition.y),i=(t.x+n.x)/2,u=(t.y+n.y)/2,j=Math.atan2(n.y-t.y,n.x-t.x)*180/Math.PI,Y=j>90||j<-90?j+180:j;return e.jsxs("g",{children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"active-gradient",x1:t.x,y1:t.y,x2:n.x,y2:n.y,gradientUnits:"userSpaceOnUse",children:[e.jsx("stop",{offset:"0%",stopColor:"#4a90e2"}),e.jsx("stop",{offset:"100%",stopColor:"#ff8c42"})]})}),e.jsx("line",{className:"connecting-line",x1:t.x,y1:t.y,x2:n.x,y2:n.y,stroke:"url(#active-gradient)"}),e.jsx("text",{className:"category-label",x:i,y:u+-8,textAnchor:"middle",transform:`rotate(${Y}, ${i}, ${u})`,children:a.category}),e.jsx("circle",{className:"dot option-a active",cx:t.x,cy:t.y,r:8,onPointerDown:A=>l(A,a.id,"a"),style:{cursor:y.isDragging?"grabbing":"grab"}}),e.jsx("circle",{className:"dot option-b active",cx:n.x,cy:n.y,r:8,onPointerDown:A=>l(A,a.id,"b"),style:{cursor:y.isDragging?"grabbing":"grab"}})]})})()]})}),e.jsxs("div",{className:"chart-legend",children:[e.jsxs("div",{className:"legend-item",children:[e.jsx("div",{className:"legend-dot option-a"}),e.jsx("span",{children:D})]}),e.jsxs("div",{className:"legend-item",children:[e.jsx("div",{className:"legend-dot option-b"}),e.jsx("span",{children:$})]})]})]})}function q({optionAName:D,optionBName:$,rows:f}){const s=C.useMemo(()=>{const r=f.filter(g=>g.chartData);if(r.length===0)return null;const l=r.map(g=>({id:g.id,category:g.category,dx:g.chartData.bPosition.x-g.chartData.aPosition.x,dy:g.chartData.bPosition.y-g.chartData.aPosition.y}));let c=0,o=0;const t=l.map(g=>{const J=c,W=o;return c+=g.dx,o+=g.dy,{id:g.id,category:g.category,startX:J,startY:W,endX:c,endY:o}}),n={x:c,y:o},i=[0,...t.map(g=>g.endX)],u=[0,...t.map(g=>g.endY)],j=Math.min(...i),v=Math.max(...i),Y=Math.min(...u),X=Math.max(...u),A=v-j,k=X-Y,S=.2,w=j-A*S,V=v+A*S,B=Y-k*S,R=X+k*S,I=V-w,U=R-B,O=Math.max(I,U),E=w-(O-I)/2,G=V+(O-I)/2,H=B-(O-U)/2,T=R+(O-U)/2;return{positions:t,aggregateEnd:n,bounds:{minX:E,maxX:G,minY:H,maxY:T,range:O}}},[f]),m=(r,l)=>{if(!s)return{x:0,y:0};const{bounds:c}=s,o=60+(r-c.minX)/c.range*480,t=540-(l-c.minY)/c.range*480;return{x:o,y:t}};if(!s||s.positions.length===0)return e.jsxs("div",{className:"value-joy-chart",children:[e.jsx("h2",{children:"Step 3: Vector Addition"}),e.jsx("p",{className:"instruction-text",children:"Place at least one category on the chart above to see the vector addition"})]});const{positions:N,aggregateEnd:h,bounds:d}=s,a=m(0,0),x=m(h.x,h.y);return e.jsxs("div",{className:"value-joy-chart",children:[e.jsx("h2",{children:"See the Big Picture"}),e.jsx("p",{className:"step-description",children:"All your categories combined into a single comparison vector"}),e.jsxs("p",{className:"instruction-text",children:["The aggregate line shows the overall difference between ",D," and ",$]}),e.jsx("div",{className:"chart-container",children:e.jsxs("svg",{className:"chart-svg",viewBox:"0 0 600 600",children:[[0,.25,.5,.75,1].map(r=>{const l=d.minX+r*d.range,c=d.minY+r*d.range,o=m(l,0).x,t=m(0,c).y;return e.jsxs("g",{children:[e.jsx("line",{className:"grid-line",x1:o,y1:60,x2:o,y2:540}),e.jsx("line",{className:"grid-line",x1:60,y1:t,x2:540,y2:t})]},`grid-${r}`)}),e.jsx("line",{className:"axis-line",x1:a.x,y1:60,x2:a.x,y2:540}),e.jsx("line",{className:"axis-line",x1:60,y1:a.y,x2:540,y2:a.y}),e.jsx("text",{className:"axis-label",x:20,y:540,textAnchor:"middle",transform:"rotate(-90, 20, 540)",children:"Less Joy"}),e.jsx("text",{className:"axis-label",x:20,y:a.y,textAnchor:"middle",transform:`rotate(-90, 20, ${a.y})`,children:"Equal"}),e.jsx("text",{className:"axis-label",x:20,y:60,textAnchor:"middle",transform:"rotate(-90, 20, 60)",children:"More Joy"}),e.jsx("text",{className:"axis-label",x:60,y:580,textAnchor:"middle",children:"Less Valuable"}),e.jsx("text",{className:"axis-label",x:a.x,y:580,textAnchor:"middle",children:"Equal"}),e.jsx("text",{className:"axis-label",x:540,y:580,textAnchor:"middle",children:"More Valuable"}),N.map(r=>{const l=m(r.startX,r.startY),c=m(r.endX,r.endY),o=(l.x+c.x)/2,t=(l.y+c.y)/2,n=Math.atan2(c.y-l.y,c.x-l.x)*180/Math.PI,u=n>90||n<-90?n+180:n;return e.jsxs("g",{opacity:.5,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:`vec-gradient-${r.id}`,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#4a90e2"}),e.jsx("stop",{offset:"100%",stopColor:"#ff8c42"})]})}),e.jsx("line",{className:"connecting-line",x1:l.x,y1:l.y,x2:c.x,y2:c.y,stroke:`url(#vec-gradient-${r.id})`}),e.jsx("text",{className:"category-label",x:o,y:t+-8,textAnchor:"middle",transform:`rotate(${u}, ${o}, ${t})`,children:r.category}),e.jsx("circle",{className:"dot option-a",cx:l.x,cy:l.y,r:4}),e.jsx("circle",{className:"dot option-b",cx:c.x,cy:c.y,r:4})]},r.id)}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"aggregate-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#4a90e2"}),e.jsx("stop",{offset:"100%",stopColor:"#ff8c42"})]})}),e.jsx("line",{className:"connecting-line aggregate-line",x1:a.x,y1:a.y,x2:x.x,y2:x.y,stroke:"url(#aggregate-gradient)",strokeWidth:"4"}),(()=>{const r=(a.x+x.x)/2,l=(a.y+x.y)/2,c=Math.atan2(x.y-a.y,x.x-a.x)*180/Math.PI,t=c>90||c<-90?c+180:c;return e.jsx("text",{className:"category-label aggregate-label",x:r,y:l+-12,textAnchor:"middle",transform:`rotate(${t}, ${r}, ${l})`,children:"Aggregate"})})(),e.jsx("circle",{className:"dot option-a",cx:a.x,cy:a.y,r:6}),e.jsx("circle",{className:"dot option-b",cx:x.x,cy:x.y,r:6}),e.jsx("text",{className:"endpoint-label",x:a.x,y:a.y-12,textAnchor:"middle",children:D}),e.jsx("text",{className:"endpoint-label",x:x.x,y:x.y-12,textAnchor:"middle",children:$})]})})]})}function _(){const[D,$]=C.useState(""),[f,M]=C.useState(""),[p,b]=C.useState([{id:"1",category:"",optionA:"",optionB:""}]),[y,P]=C.useState(null),s=()=>{const a={id:Date.now().toString(),category:"",optionA:"",optionB:""};b([...p,a])},m=a=>{b(p.filter(x=>x.id!==a)),y===a&&P(null)},N=(a,x)=>{b(p.map(r=>r.id===a?{...r,...x}:r))},h=(a,x,r)=>{b(p.map(l=>l.id===a?{...l,chartData:{aPosition:x,bPosition:r}}:l))},d=(a,x)=>{const r=[...p],[l]=r.splice(a,1);r.splice(x,0,l),b(r)};return e.jsxs("div",{className:"decision-tool",children:[e.jsxs("header",{children:[e.jsx("h1",{children:"Decision Vectorizer"}),e.jsx("p",{className:"subtitle",children:"No decision tool is perfect, but some are useful."}),e.jsx("p",{className:"intro-text",children:"Choosing between two options? This tool helps you see the full picture by mapping both the facts and your feelings about each choice. Perfect for job offers, living situations, or any major decision."})]}),e.jsxs("div",{className:"tool-container",children:[e.jsx(F,{optionAName:D,optionBName:f,setOptionAName:$,setOptionBName:M,rows:p,addRow:s,deleteRow:m,updateRow:N,activeRowId:y,setActiveRowId:P,reorderRows:d}),e.jsx(L,{optionAName:D,optionBName:f,rows:p,activeRowId:y,updateChartData:h}),e.jsx(q,{optionAName:D,optionBName:f,rows:p})]}),e.jsx("footer",{className:"tool-footer",children:e.jsxs("p",{children:["Inspired by"," ",e.jsx("a",{href:"https://labs.davidbauer.ch/priority-compass/",target:"_blank",rel:"noopener noreferrer",children:"Priority Compass"})]})})]})}export{_ as default};
