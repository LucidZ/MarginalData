import{r as D,j as e}from"./index-B9rqXie6.js";function F({optionAName:y,optionBName:f,setOptionAName:u,setOptionBName:N,rows:x,addRow:j,deleteRow:b,updateRow:k,activeRowId:m,setActiveRowId:h,reorderRows:v}){const[i,c]=D.useState(null),[s,l]=D.useState(null),a=(n,o)=>{c(o),n.dataTransfer.effectAllowed="move"},t=(n,o)=>{n.preventDefault(),i!==null&&i!==o&&l(o)},r=()=>{i!==null&&s!==null&&v(i,s),c(null),l(null)};return e.jsxs("div",{className:"comparison-table",children:[e.jsx("h2",{children:"Compare the Facts"}),e.jsx("p",{className:"step-description",children:"List the objective differences between your options (salary, commute time, etc.)"}),e.jsxs("div",{className:"table-headers",children:[e.jsx("span",{children:"⇅"}),e.jsx("span",{children:"Category"}),e.jsx("input",{type:"text",value:y,onChange:n=>u(n.target.value),placeholder:"e.g. Startup Job"}),e.jsx("input",{type:"text",value:f,onChange:n=>N(n.target.value),placeholder:"e.g. Current Job"}),e.jsx("span",{})]}),x.map((n,o)=>{const g={category:"e.g. Salary / Commute / Tech",optionA:"e.g. $40k / 25 min / Modern Greenfield",optionB:"e.g. $50k / 40 min / Old School Legacy"};return e.jsxs("div",{className:`table-row ${m===n.id?"active":""} ${i===o?"dragging":""} ${s===o?"drag-over":""}`,onClick:()=>h(n.id),draggable:!0,onDragStart:d=>a(d,o),onDragOver:d=>t(d,o),onDragEnd:r,children:[e.jsx("div",{className:"drag-handle",title:"Drag to reorder",children:"⋮⋮"}),e.jsx("input",{type:"text",value:n.category,onChange:d=>k(n.id,{category:d.target.value}),onFocus:()=>h(n.id),placeholder:g.category,onClick:d=>d.stopPropagation()}),e.jsx("input",{type:"text",value:n.optionA,onChange:d=>k(n.id,{optionA:d.target.value}),onFocus:()=>h(n.id),placeholder:g.optionA,onClick:d=>d.stopPropagation()}),e.jsx("input",{type:"text",value:n.optionB,onChange:d=>k(n.id,{optionB:d.target.value}),onFocus:()=>h(n.id),placeholder:g.optionB,onClick:d=>d.stopPropagation()}),e.jsx("button",{onClick:d=>{d.stopPropagation(),b(n.id)},title:"Delete row",children:"×"})]},n.id)}),e.jsx("button",{className:"add-row-button",onClick:j,children:"+ Add Category"})]})}function I({optionAName:y,optionBName:f,rows:u,updateSliderData:N}){const[x,j]=D.useState({isDragging:!1,rowId:null,sliderType:null,markerType:null}),b=D.useRef(new Map),k=(i,c)=>{const s=c.getBoundingClientRect(),l=i.clientX-s.left;return Math.max(0,Math.min(1,l/s.width))},m=(i,c,s,l)=>{i.preventDefault(),i.target.setPointerCapture(i.pointerId),j({isDragging:!0,rowId:c,sliderType:s,markerType:l})},h=(i,c,s)=>{var d,A,C,M;if(!x.isDragging||x.rowId!==c||x.sliderType!==s)return;const l=b.current.get(`${c}-${s}`);if(!l)return;const a=k(i,l),t=u.find(X=>X.id===c);if(!t)return;const r=((d=t.sliderData)==null?void 0:d.joyA)??.5,n=((A=t.sliderData)==null?void 0:A.joyB)??.5,o=((C=t.sliderData)==null?void 0:C.valueA)??.5,g=((M=t.sliderData)==null?void 0:M.valueB)??.5;s==="joy"?x.markerType==="a"?N(c,a,n,o,g):N(c,r,a,o,g):x.markerType==="a"?N(c,r,n,a,g):N(c,r,n,o,a)},v=i=>{x.isDragging&&(i.target.releasePointerCapture(i.pointerId),j({isDragging:!1,rowId:null,sliderType:null,markerType:null}))};return e.jsxs("div",{className:"component-sliders",children:[e.jsx("h2",{children:"Rate Each Component"}),e.jsx("p",{className:"step-description",children:"For each category, position the markers to show how each option feels and its importance"}),e.jsxs("div",{className:"slider-section",children:[e.jsx("h3",{className:"slider-section-title",children:"How does it make you feel?"}),e.jsxs("div",{className:"slider-axis-labels",children:[e.jsx("span",{children:"Ugh!"}),e.jsx("span",{children:"Sparks Joy!"})]}),u.map(i=>{var l,a;const c=((l=i.sliderData)==null?void 0:l.joyA)??.5,s=((a=i.sliderData)==null?void 0:a.joyB)??.5;return e.jsxs("div",{className:"slider-row",children:[e.jsx("div",{className:"slider-label",children:i.category||"Untitled"}),e.jsxs("div",{className:"slider-track",ref:t=>{t&&b.current.set(`${i.id}-joy`,t)},onPointerMove:t=>h(t,i.id,"joy"),onPointerUp:v,onPointerLeave:v,children:[e.jsx("div",{className:"slider-line"}),e.jsx("div",{className:"slider-tick",style:{left:"25%"}}),e.jsx("div",{className:"slider-tick slider-tick-middle",style:{left:"50%"},children:e.jsx("span",{className:"tick-label",children:"Neutral"})}),e.jsx("div",{className:"slider-tick",style:{left:"75%"}}),e.jsx("div",{className:"slider-marker marker-a",style:{left:`${c*100}%`},onPointerDown:t=>m(t,i.id,"joy","a"),children:e.jsx("div",{className:"marker-label",children:y||"A"})}),e.jsx("div",{className:"slider-marker marker-b",style:{left:`${s*100}%`},onPointerDown:t=>m(t,i.id,"joy","b"),children:e.jsx("div",{className:"marker-label",children:f||"B"})})]})]},`joy-${i.id}`)})]}),e.jsxs("div",{className:"slider-section",children:[e.jsx("h3",{className:"slider-section-title",children:"How valuable/important is this factor?"}),e.jsxs("div",{className:"slider-axis-labels",children:[e.jsx("span",{children:"Low Value"}),e.jsx("span",{children:"High Value"})]}),u.map(i=>{var l,a;const c=((l=i.sliderData)==null?void 0:l.valueA)??.5,s=((a=i.sliderData)==null?void 0:a.valueB)??.5;return e.jsxs("div",{className:"slider-row",children:[e.jsx("div",{className:"slider-label",children:i.category||"Untitled"}),e.jsxs("div",{className:"slider-track",ref:t=>{t&&b.current.set(`${i.id}-value`,t)},onPointerMove:t=>h(t,i.id,"value"),onPointerUp:v,onPointerLeave:v,children:[e.jsx("div",{className:"slider-line"}),e.jsx("div",{className:"slider-tick",style:{left:"25%"}}),e.jsx("div",{className:"slider-tick slider-tick-middle",style:{left:"50%"}}),e.jsx("div",{className:"slider-tick",style:{left:"75%"}}),e.jsx("div",{className:"slider-marker marker-a",style:{left:`${c*100}%`},onPointerDown:t=>m(t,i.id,"value","a"),children:e.jsx("div",{className:"marker-label",children:y||"A"})}),e.jsx("div",{className:"slider-marker marker-b",style:{left:`${s*100}%`},onPointerDown:t=>m(t,i.id,"value","b"),children:e.jsx("div",{className:"marker-label",children:f||"B"})})]})]},`value-${i.id}`)})]})]})}function z({optionAName:y,optionBName:f,rows:u}){const m=D.useMemo(()=>{const a=u.filter(p=>p.sliderData);if(a.length===0)return null;const t=a.map(p=>{const $=p.sliderData;return{id:p.id,category:p.category,dx:($.valueB-$.valueA)*2,dy:($.joyB-$.joyA)*2}});let r=0,n=0;const o=t.map(p=>{const $=r,w=n;return r+=p.dx,n+=p.dy,{id:p.id,category:p.category,startX:$,startY:w,endX:r,endY:n}}),g={x:r,y:n},d=[0,...o.map(p=>p.endX)],A=[0,...o.map(p=>p.endY)],C=Math.min(...d),M=Math.max(...d),X=Math.min(...A),R=Math.max(...A),E=M-C,O=R-X,Y=.2,V=C-E*Y,H=M+E*Y,U=X-O*Y,T=R+O*Y,B=H-V,S=T-U,P=Math.max(B,S),G=V-(P-B)/2,J=H+(P-B)/2,L=U-(P-S)/2,W=T+(P-S)/2;return{positions:o,aggregateEnd:g,bounds:{minX:G,maxX:J,minY:L,maxY:W,range:P}}},[u]),h=(a,t)=>{if(!m)return{x:0,y:0};const{bounds:r}=m,n=60+(a-r.minX)/r.range*480,o=540-(t-r.minY)/r.range*480;return{x:n,y:o}};if(!m||m.positions.length===0)return e.jsxs("div",{className:"value-joy-chart",children:[e.jsx("h2",{children:"See the Big Picture"}),e.jsx("p",{className:"instruction-text",children:"Rate at least one category using the sliders above to see the vector addition"})]});const{positions:v,aggregateEnd:i,bounds:c}=m,s=h(0,0),l=h(i.x,i.y);return e.jsxs("div",{className:"value-joy-chart",children:[e.jsx("h2",{children:"See the Big Picture"}),e.jsx("p",{className:"step-description",children:"All your categories combined into a single comparison vector"}),e.jsxs("p",{className:"instruction-text",children:["The aggregate line shows the overall difference between ",y," and ",f]}),e.jsx("div",{className:"chart-container",children:e.jsxs("svg",{className:"chart-svg",viewBox:"0 0 600 600",children:[[0,.25,.5,.75,1].map(a=>{const t=c.minX+a*c.range,r=c.minY+a*c.range,n=h(t,0).x,o=h(0,r).y;return e.jsxs("g",{children:[e.jsx("line",{className:"grid-line",x1:n,y1:60,x2:n,y2:540}),e.jsx("line",{className:"grid-line",x1:60,y1:o,x2:540,y2:o})]},`grid-${a}`)}),e.jsx("line",{className:"axis-line",x1:s.x,y1:60,x2:s.x,y2:540}),e.jsx("line",{className:"axis-line",x1:60,y1:s.y,x2:540,y2:s.y}),e.jsx("text",{className:"axis-label",x:20,y:540,textAnchor:"middle",transform:"rotate(-90, 20, 540)",children:"Less Joy"}),e.jsx("text",{className:"axis-label",x:20,y:s.y,textAnchor:"middle",transform:`rotate(-90, 20, ${s.y})`,children:"Equal"}),e.jsx("text",{className:"axis-label",x:20,y:60,textAnchor:"middle",transform:"rotate(-90, 20, 60)",children:"More Joy"}),e.jsx("text",{className:"axis-label",x:60,y:580,textAnchor:"middle",children:"Less Valuable"}),e.jsx("text",{className:"axis-label",x:s.x,y:580,textAnchor:"middle",children:"Equal"}),e.jsx("text",{className:"axis-label",x:540,y:580,textAnchor:"middle",children:"More Valuable"}),v.map(a=>{const t=h(a.startX,a.startY),r=h(a.endX,a.endY),n=(t.x+r.x)/2,o=(t.y+r.y)/2,g=Math.atan2(r.y-t.y,r.x-t.x)*180/Math.PI,A=g>90||g<-90?g+180:g;return e.jsxs("g",{opacity:.5,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:`vec-gradient-${a.id}`,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#4a90e2"}),e.jsx("stop",{offset:"100%",stopColor:"#ff8c42"})]})}),e.jsx("line",{className:"connecting-line",x1:t.x,y1:t.y,x2:r.x,y2:r.y,stroke:`url(#vec-gradient-${a.id})`}),e.jsx("text",{className:"category-label",x:n,y:o+-8,textAnchor:"middle",transform:`rotate(${A}, ${n}, ${o})`,children:a.category}),e.jsx("circle",{className:"dot option-a",cx:t.x,cy:t.y,r:4}),e.jsx("circle",{className:"dot option-b",cx:r.x,cy:r.y,r:4})]},a.id)}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"aggregate-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#4a90e2"}),e.jsx("stop",{offset:"100%",stopColor:"#ff8c42"})]})}),e.jsx("line",{className:"connecting-line aggregate-line",x1:s.x,y1:s.y,x2:l.x,y2:l.y,stroke:"url(#aggregate-gradient)",strokeWidth:"4"}),(()=>{const a=(s.x+l.x)/2,t=(s.y+l.y)/2,r=Math.atan2(l.y-s.y,l.x-s.x)*180/Math.PI,o=r>90||r<-90?r+180:r;return e.jsx("text",{className:"category-label aggregate-label",x:a,y:t+-12,textAnchor:"middle",transform:`rotate(${o}, ${a}, ${t})`,children:"Aggregate"})})(),e.jsx("circle",{className:"dot option-a",cx:s.x,cy:s.y,r:6}),e.jsx("circle",{className:"dot option-b",cx:l.x,cy:l.y,r:6}),e.jsx("text",{className:"endpoint-label",x:s.x,y:s.y-12,textAnchor:"middle",children:y}),e.jsx("text",{className:"endpoint-label",x:l.x,y:l.y-12,textAnchor:"middle",children:f})]})})]})}function _(){const[y,f]=D.useState(""),[u,N]=D.useState(""),[x,j]=D.useState([{id:"1",category:"",optionA:"",optionB:""}]),[b,k]=D.useState(null),m=()=>{const s={id:Date.now().toString(),category:"",optionA:"",optionB:""};j([...x,s])},h=s=>{j(x.filter(l=>l.id!==s)),b===s&&k(null)},v=(s,l)=>{j(x.map(a=>a.id===s?{...a,...l}:a))},i=(s,l,a,t,r)=>{j(x.map(n=>n.id===s?{...n,sliderData:{joyA:l,joyB:a,valueA:t,valueB:r}}:n))},c=(s,l)=>{const a=[...x],[t]=a.splice(s,1);a.splice(l,0,t),j(a)};return e.jsxs("div",{className:"decision-tool",children:[e.jsxs("header",{children:[e.jsx("h1",{children:"Decision Component Analyzer"}),e.jsx("p",{className:"subtitle",children:"Break down complex decisions into manageable components."}),e.jsx("p",{className:"intro-text",children:"Analyze decisions by breaking them into individual factors and visualizing how each component contributes to the overall choice."})]}),e.jsxs("div",{className:"tool-container",children:[e.jsx(F,{optionAName:y,optionBName:u,setOptionAName:f,setOptionBName:N,rows:x,addRow:m,deleteRow:h,updateRow:v,activeRowId:b,setActiveRowId:k,reorderRows:c}),e.jsx(I,{optionAName:y,optionBName:u,rows:x,updateSliderData:i}),e.jsx(z,{optionAName:y,optionBName:u,rows:x})]}),e.jsx("footer",{className:"tool-footer",children:e.jsxs("p",{children:["Inspired by"," ",e.jsx("a",{href:"https://labs.davidbauer.ch/priority-compass/",target:"_blank",rel:"noopener noreferrer",children:"Priority Compass"})]})})]})}export{_ as default};
