import{r as C,j as t}from"./index-DbksdOIF.js";function F({optionAName:D,optionBName:$,setOptionAName:f,setOptionBName:M,rows:m,addRow:b,deleteRow:y,updateRow:P,activeRowId:s,setActiveRowId:p,reorderRows:N}){const[h,d]=C.useState(null),[a,x]=C.useState(null),r=(o,e)=>{d(e),o.dataTransfer.effectAllowed="move"},l=(o,e)=>{o.preventDefault(),h!==null&&h!==e&&x(e)},c=()=>{h!==null&&a!==null&&N(h,a),d(null),x(null)};return t.jsxs("div",{className:"comparison-table",children:[t.jsx("h2",{children:"Compare the Facts"}),t.jsx("p",{className:"step-description",children:"List the objective differences between your options (salary, commute time, etc.)"}),t.jsxs("div",{className:"table-headers",children:[t.jsx("span",{children:"⇅"}),t.jsx("span",{children:"Category"}),t.jsx("input",{type:"text",value:D,onChange:o=>f(o.target.value),placeholder:"e.g. Startup Job"}),t.jsx("input",{type:"text",value:$,onChange:o=>M(o.target.value),placeholder:"e.g. Current Job"}),t.jsx("span",{})]}),m.map((o,e)=>{const n={category:"Category",optionA:"Value",optionB:"Value"};return t.jsxs("div",{className:`table-row ${s===o.id?"active":""} ${o.chartData?"placed":""} ${h===e?"dragging":""} ${a===e?"drag-over":""}`,onClick:()=>p(o.id),draggable:!0,onDragStart:i=>r(i,e),onDragOver:i=>l(i,e),onDragEnd:c,children:[t.jsx("div",{className:"drag-handle",title:"Drag to reorder",children:"⋮⋮"}),t.jsx("input",{type:"text",value:o.category,onChange:i=>P(o.id,{category:i.target.value}),onFocus:()=>p(o.id),placeholder:n.category,onClick:i=>i.stopPropagation()}),t.jsx("input",{type:"text",value:o.optionA,onChange:i=>P(o.id,{optionA:i.target.value}),onFocus:()=>p(o.id),placeholder:n.optionA,onClick:i=>i.stopPropagation()}),t.jsx("input",{type:"text",value:o.optionB,onChange:i=>P(o.id,{optionB:i.target.value}),onFocus:()=>p(o.id),placeholder:n.optionB,onClick:i=>i.stopPropagation()}),t.jsx("button",{onClick:i=>{i.stopPropagation(),y(o.id)},title:"Delete row",children:"×"})]},o.id)}),t.jsx("button",{className:"add-row-button",onClick:b,children:"+ Add Category"})]})}function L({optionAName:D,optionBName:$,rows:f,activeRowId:M,updateChartData:m}){const b=C.useRef(null),[y,P]=C.useState({isDragging:!1,dotType:null,rowId:null}),s=60,p=600,N=600,h=p-s*2,d=N-s*2,a=f.find(e=>e.id===M),x=(e,n)=>({x:s+e*h,y:s+d-n*d}),r=(e,n)=>{const i=Math.max(0,Math.min(1,(e-s)/h)),u=Math.max(0,Math.min(1,1-(n-s)/d));return{x:i,y:u}},l=(e,n,i)=>{e.preventDefault(),e.target.setPointerCapture(e.pointerId),P({isDragging:!0,dotType:i,rowId:n})},c=e=>{var A,w;if(!y.isDragging||!y.rowId||!b.current)return;const n=b.current.getBoundingClientRect(),i=e.clientX-n.left,u=e.clientY-n.top,j=r(i,u),v=f.find(S=>S.id===y.rowId);if(!v)return;const Y=((A=v.chartData)==null?void 0:A.aPosition)||{x:.5,y:.5},X=((w=v.chartData)==null?void 0:w.bPosition)||{x:.5,y:.5};y.dotType==="a"?m(y.rowId,j,X):m(y.rowId,Y,j)},o=e=>{y.isDragging&&(e.target.releasePointerCapture(e.pointerId),P({isDragging:!1,dotType:null,rowId:null}))};return C.useEffect(()=>{a&&!a.chartData&&m(a.id,{x:.5,y:.5},{x:.5,y:.5})},[a==null?void 0:a.id]),t.jsxs("div",{className:"value-joy-chart",children:[t.jsx("h2",{children:"Map Your Feelings"}),t.jsx("p",{className:"step-description",children:"For each category, drag the dots to show how valuable it is and how it makes you feel"}),a?t.jsxs("p",{className:"instruction-text",children:["Drag the dots to position ",t.jsx("strong",{children:a.category||"this category"})," for each option"]}):t.jsx("p",{className:"instruction-text",children:"Click a category above to start mapping"}),t.jsx("div",{className:"chart-container",children:t.jsxs("svg",{ref:b,className:"chart-svg",viewBox:`0 0 ${p} ${N}`,onPointerMove:c,onPointerUp:o,onPointerLeave:o,children:[[0,.25,.5,.75,1].map(e=>t.jsxs("g",{children:[t.jsx("line",{className:"grid-line",x1:s,y1:s+d-e*d,x2:s+h,y2:s+d-e*d}),t.jsx("line",{className:"grid-line",x1:s+e*h,y1:s,x2:s+e*h,y2:s+d})]},`grid-${e}`)),t.jsx("line",{className:"axis-line",x1:s,y1:s,x2:s,y2:s+d}),t.jsx("line",{className:"axis-line",x1:s,y1:s+d,x2:s+h,y2:s+d}),t.jsx("text",{className:"axis-label",x:20,y:s+d,textAnchor:"middle",transform:`rotate(-90, 20, ${s+d})`,children:"Ugh"}),t.jsx("text",{className:"axis-label",x:20,y:s+d/2,textAnchor:"middle",transform:`rotate(-90, 20, ${s+d/2})`,children:"Neutral"}),t.jsx("text",{className:"axis-label",x:20,y:s,textAnchor:"middle",transform:`rotate(-90, 20, ${s})`,children:"Sparks Joy"}),t.jsxs("text",{className:"axis-title",x:5,y:s+d/2,textAnchor:"middle",transform:`rotate(-90, 5, ${s+d/2})`,children:[t.jsx("title",{children:"How does this make you feel emotionally?"}),"Joy →"]}),t.jsx("text",{className:"axis-label",x:s,y:N-20,textAnchor:"middle",children:"Not Valuable"}),t.jsx("text",{className:"axis-label",x:s+h/2,y:N-20,textAnchor:"middle",children:"Neutral"}),t.jsx("text",{className:"axis-label",x:s+h,y:N-20,textAnchor:"middle",children:"Very Valuable"}),t.jsxs("text",{className:"axis-title",x:s+h/2,y:N-5,textAnchor:"middle",children:[t.jsx("title",{children:"How objectively important is this factor?"}),"← Value →"]}),f.filter(e=>e.chartData&&e.id!==M).map(e=>{const n=x(e.chartData.aPosition.x,e.chartData.aPosition.y),i=x(e.chartData.bPosition.x,e.chartData.bPosition.y),u=(n.x+i.x)/2,j=(n.y+i.y)/2,v=Math.atan2(i.y-n.y,i.x-n.x)*180/Math.PI,X=v>90||v<-90?v+180:v;return t.jsxs("g",{opacity:.5,children:[t.jsx("defs",{children:t.jsxs("linearGradient",{id:`gradient-${e.id}`,x1:n.x,y1:n.y,x2:i.x,y2:i.y,gradientUnits:"userSpaceOnUse",children:[t.jsx("stop",{offset:"0%",stopColor:"#4a90e2"}),t.jsx("stop",{offset:"100%",stopColor:"#ff8c42"})]})}),t.jsx("line",{className:"connecting-line",x1:n.x,y1:n.y,x2:i.x,y2:i.y,stroke:`url(#gradient-${e.id})`}),t.jsx("text",{className:"category-label",x:u,y:j+-8,textAnchor:"middle",transform:`rotate(${X}, ${u}, ${j})`,children:e.category}),t.jsx("circle",{className:"dot option-a",cx:n.x,cy:n.y,r:6}),t.jsx("circle",{className:"dot option-b",cx:i.x,cy:i.y,r:6})]},e.id)}),a&&a.chartData&&(()=>{const e=x(a.chartData.aPosition.x,a.chartData.aPosition.y),n=x(a.chartData.bPosition.x,a.chartData.bPosition.y),i=(e.x+n.x)/2,u=(e.y+n.y)/2,j=Math.atan2(n.y-e.y,n.x-e.x)*180/Math.PI,Y=j>90||j<-90?j+180:j;return t.jsxs("g",{children:[t.jsx("defs",{children:t.jsxs("linearGradient",{id:"active-gradient",x1:e.x,y1:e.y,x2:n.x,y2:n.y,gradientUnits:"userSpaceOnUse",children:[t.jsx("stop",{offset:"0%",stopColor:"#4a90e2"}),t.jsx("stop",{offset:"100%",stopColor:"#ff8c42"})]})}),t.jsx("line",{className:"connecting-line",x1:e.x,y1:e.y,x2:n.x,y2:n.y,stroke:"url(#active-gradient)"}),t.jsx("text",{className:"category-label",x:i,y:u+-8,textAnchor:"middle",transform:`rotate(${Y}, ${i}, ${u})`,children:a.category}),t.jsx("circle",{className:"dot option-a active",cx:e.x,cy:e.y,r:8,onPointerDown:A=>l(A,a.id,"a"),style:{cursor:y.isDragging?"grabbing":"grab"}}),t.jsx("text",{className:"endpoint-label",x:e.x,y:e.y-15,textAnchor:"middle",style:{pointerEvents:"none"},children:a.optionA||"A"}),t.jsx("circle",{className:"dot option-b active",cx:n.x,cy:n.y,r:8,onPointerDown:A=>l(A,a.id,"b"),style:{cursor:y.isDragging?"grabbing":"grab"}}),t.jsx("text",{className:"endpoint-label",x:n.x,y:n.y-15,textAnchor:"middle",style:{pointerEvents:"none"},children:a.optionB||"B"})]})})()]})}),t.jsxs("div",{className:"chart-legend",children:[t.jsxs("div",{className:"legend-item",children:[t.jsx("div",{className:"legend-dot option-a"}),t.jsx("span",{children:D})]}),t.jsxs("div",{className:"legend-item",children:[t.jsx("div",{className:"legend-dot option-b"}),t.jsx("span",{children:$})]})]})]})}function q({optionAName:D,optionBName:$,rows:f}){const s=C.useMemo(()=>{const r=f.filter(g=>g.chartData);if(r.length===0)return null;const l=r.map(g=>({id:g.id,category:g.category,dx:g.chartData.bPosition.x-g.chartData.aPosition.x,dy:g.chartData.bPosition.y-g.chartData.aPosition.y}));let c=0,o=0;const e=l.map(g=>{const J=c,W=o;return c+=g.dx,o+=g.dy,{id:g.id,category:g.category,startX:J,startY:W,endX:c,endY:o}}),n={x:c,y:o},i=[0,...e.map(g=>g.endX)],u=[0,...e.map(g=>g.endY)],j=Math.min(...i),v=Math.max(...i),Y=Math.min(...u),X=Math.max(...u),A=v-j,w=X-Y,S=.2,I=j-A*S,U=v+A*S,V=Y-w*S,T=X+w*S,B=U-I,O=T-V,k=Math.max(B,O),E=I-(k-B)/2,R=U+(k-B)/2,G=V-(k-O)/2,H=T+(k-O)/2;return{positions:e,aggregateEnd:n,bounds:{minX:E,maxX:R,minY:G,maxY:H,range:k}}},[f]),p=(r,l)=>{if(!s)return{x:0,y:0};const{bounds:c}=s,o=60+(r-c.minX)/c.range*480,e=540-(l-c.minY)/c.range*480;return{x:o,y:e}};if(!s||s.positions.length===0)return t.jsxs("div",{className:"value-joy-chart",children:[t.jsx("h2",{children:"Step 3: Vector Addition"}),t.jsx("p",{className:"instruction-text",children:"Place at least one category on the chart above to see the vector addition"})]});const{positions:N,aggregateEnd:h,bounds:d}=s,a=p(0,0),x=p(h.x,h.y);return t.jsxs("div",{className:"value-joy-chart",children:[t.jsx("h2",{children:"See the Big Picture"}),t.jsx("p",{className:"step-description",children:"All your categories combined into a single comparison vector"}),t.jsxs("p",{className:"instruction-text",children:["The aggregate line shows the overall difference between ",D," and ",$]}),t.jsx("div",{className:"chart-container",children:t.jsxs("svg",{className:"chart-svg",viewBox:"0 0 600 600",children:[[0,.25,.5,.75,1].map(r=>{const l=d.minX+r*d.range,c=d.minY+r*d.range,o=p(l,0).x,e=p(0,c).y;return t.jsxs("g",{children:[t.jsx("line",{className:"grid-line",x1:o,y1:60,x2:o,y2:540}),t.jsx("line",{className:"grid-line",x1:60,y1:e,x2:540,y2:e})]},`grid-${r}`)}),t.jsx("line",{className:"axis-line",x1:a.x,y1:60,x2:a.x,y2:540}),t.jsx("line",{className:"axis-line",x1:60,y1:a.y,x2:540,y2:a.y}),t.jsx("text",{className:"axis-label",x:20,y:540,textAnchor:"middle",transform:"rotate(-90, 20, 540)",children:"Less Joy"}),t.jsx("text",{className:"axis-label",x:20,y:a.y,textAnchor:"middle",transform:`rotate(-90, 20, ${a.y})`,children:"Equal"}),t.jsx("text",{className:"axis-label",x:20,y:60,textAnchor:"middle",transform:"rotate(-90, 20, 60)",children:"More Joy"}),t.jsx("text",{className:"axis-label",x:60,y:580,textAnchor:"middle",children:"Less Valuable"}),t.jsx("text",{className:"axis-label",x:a.x,y:580,textAnchor:"middle",children:"Equal"}),t.jsx("text",{className:"axis-label",x:540,y:580,textAnchor:"middle",children:"More Valuable"}),N.map(r=>{const l=p(r.startX,r.startY),c=p(r.endX,r.endY),o=(l.x+c.x)/2,e=(l.y+c.y)/2,n=Math.atan2(c.y-l.y,c.x-l.x)*180/Math.PI,u=n>90||n<-90?n+180:n;return t.jsxs("g",{opacity:.5,children:[t.jsx("defs",{children:t.jsxs("linearGradient",{id:`vec-gradient-${r.id}`,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[t.jsx("stop",{offset:"0%",stopColor:"#4a90e2"}),t.jsx("stop",{offset:"100%",stopColor:"#ff8c42"})]})}),t.jsx("line",{className:"connecting-line",x1:l.x,y1:l.y,x2:c.x,y2:c.y,stroke:`url(#vec-gradient-${r.id})`}),t.jsx("text",{className:"category-label",x:o,y:e+-8,textAnchor:"middle",transform:`rotate(${u}, ${o}, ${e})`,children:r.category}),t.jsx("circle",{className:"dot option-a",cx:l.x,cy:l.y,r:4}),t.jsx("circle",{className:"dot option-b",cx:c.x,cy:c.y,r:4})]},r.id)}),t.jsx("defs",{children:t.jsxs("linearGradient",{id:"aggregate-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[t.jsx("stop",{offset:"0%",stopColor:"#4a90e2"}),t.jsx("stop",{offset:"100%",stopColor:"#ff8c42"})]})}),t.jsx("line",{className:"connecting-line aggregate-line",x1:a.x,y1:a.y,x2:x.x,y2:x.y,stroke:"url(#aggregate-gradient)",strokeWidth:"4"}),(()=>{const r=(a.x+x.x)/2,l=(a.y+x.y)/2,c=Math.atan2(x.y-a.y,x.x-a.x)*180/Math.PI,e=c>90||c<-90?c+180:c;return t.jsx("text",{className:"category-label aggregate-label",x:r,y:l+-12,textAnchor:"middle",transform:`rotate(${e}, ${r}, ${l})`,children:"Aggregate"})})(),t.jsx("circle",{className:"dot option-a",cx:a.x,cy:a.y,r:6}),t.jsx("circle",{className:"dot option-b",cx:x.x,cy:x.y,r:6}),t.jsx("text",{className:"endpoint-label",x:a.x,y:a.y-12,textAnchor:"middle",children:D}),t.jsx("text",{className:"endpoint-label",x:x.x,y:x.y-12,textAnchor:"middle",children:$})]})})]})}function K(){const[D,$]=C.useState("Current Job"),[f,M]=C.useState("New Job"),[m,b]=C.useState([{id:"1",category:"Compensation",optionA:"$50k",optionB:"$45k",chartData:{aPosition:{x:.7,y:.55},bPosition:{x:.4,y:.45}}},{id:"2",category:"Tech",optionA:"Legacy",optionB:"Modern Greenfield",chartData:{aPosition:{x:.4,y:.5},bPosition:{x:.6,y:.9}}},{id:"3",category:"People",optionA:"Toxic",optionB:"Kind",chartData:{aPosition:{x:.5,y:.3},bPosition:{x:.51,y:.6}}}]),[y,P]=C.useState(null),s=()=>{const a={id:Date.now().toString(),category:"",optionA:"",optionB:""};b([...m,a])},p=a=>{b(m.filter(x=>x.id!==a)),y===a&&P(null)},N=(a,x)=>{b(m.map(r=>r.id===a?{...r,...x}:r))},h=(a,x,r)=>{b(m.map(l=>l.id===a?{...l,chartData:{aPosition:x,bPosition:r}}:l))},d=(a,x)=>{const r=[...m],[l]=r.splice(a,1);r.splice(x,0,l),b(r)};return t.jsxs("div",{className:"decision-tool",children:[t.jsxs("header",{children:[t.jsx("h1",{children:"Decision Vectorizer"}),t.jsx("p",{className:"subtitle",children:"No decision tool is perfect, but some are useful."}),t.jsx("p",{className:"intro-text",children:"Choosing between two options? This tool helps you see the full picture by mapping both the facts and your feelings about each choice. Perfect for job offers, living situations, or any major decision."})]}),t.jsxs("div",{className:"tool-container",children:[t.jsx(F,{optionAName:D,optionBName:f,setOptionAName:$,setOptionBName:M,rows:m,addRow:s,deleteRow:p,updateRow:N,activeRowId:y,setActiveRowId:P,reorderRows:d}),t.jsx(L,{optionAName:D,optionBName:f,rows:m,activeRowId:y,updateChartData:h}),t.jsx(q,{optionAName:D,optionBName:f,rows:m})]}),t.jsxs("footer",{className:"tool-footer",children:[t.jsxs("div",{className:"insight-tip",children:[t.jsxs("p",{style:{fontStyle:"italic",marginBottom:"0.5rem"},children:[t.jsx("strong",{children:"Still unsure?"})," Try using the tool again with different scenarios:"]}),t.jsxs("ul",{style:{textAlign:"left",maxWidth:"600px",margin:"0 auto",paddingLeft:"1.5rem"},children:[t.jsx("li",{children:"Fill everything out assuming the best-case scenario, then the worst-case"}),t.jsx("li",{children:"Assume the best for one option and the worst for the other"})]}),t.jsx("p",{style:{fontStyle:"italic",marginTop:"0.5rem"},children:"The goal isn't always to find the optimal choice, but to gain new insights about what matters most to you."})]}),t.jsxs("p",{style:{marginTop:"1.5rem"},children:["Inspired by"," ",t.jsx("a",{href:"https://labs.davidbauer.ch/priority-compass/",target:"_blank",rel:"noopener noreferrer",children:"Priority Compass"})]})]})]})}export{K as default};
