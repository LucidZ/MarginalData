import{r as j,j as i}from"./index-Rvvmkl7q.js";import"./transform-BGpuWWbS.js";import{a as x,b as A,u as p}from"./react-BpusSw2y.js";import{i as G,m as I,l as E,d as H,f as R}from"./linear-BwuSL8oF.js";class k extends Map{constructor(t,r=z){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get(S(this,t))}has(t){return super.has(S(this,t))}set(t,r){return super.set(L(this,t),r)}delete(t){return super.delete(W(this,t))}}function S({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function L({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function W({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function z(e){return e!==null&&typeof e=="object"?e.valueOf():e}function $(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,o=new Array(s);++n<s;)o[n]=e+n*r;return o}const M=Symbol("implicit");function N(){var e=new k,t=[],r=[],n=M;function s(o){let c=e.get(o);if(c===void 0){if(n!==M)return n;e.set(o,c=t.push(o)-1)}return r[c%r.length]}return s.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new k;for(const c of o)e.has(c)||e.set(c,t.push(c)-1);return s},s.range=function(o){return arguments.length?(r=Array.from(o),s):r.slice()},s.unknown=function(o){return arguments.length?(n=o,s):n},s.copy=function(){return N(t,r).unknown(n)},G.apply(s,arguments),s}function U(){var e=N().unknown(void 0),t=e.domain,r=e.range,n=0,s=1,o,c,l=!1,d=0,h=0,g=.5;delete e.unknown;function m(){var a=t().length,D=s<n,f=D?s:n,O=D?n:s;o=(O-f)/Math.max(1,a-d+h*2),l&&(o=Math.floor(o)),f+=(O-f-o*(a-d))*g,c=o*(1-d),l&&(f=Math.round(f),c=Math.round(c));var y=$(a).map(function(w){return f+o*w});return r(D?y.reverse():y)}return e.domain=function(a){return arguments.length?(t(a),m()):t()},e.range=function(a){return arguments.length?([n,s]=a,n=+n,s=+s,m()):[n,s]},e.rangeRound=function(a){return[n,s]=a,n=+n,s=+s,l=!0,m()},e.bandwidth=function(){return c},e.step=function(){return o},e.round=function(a){return arguments.length?(l=!!a,m()):l},e.padding=function(a){return arguments.length?(d=Math.min(1,h=+a),m()):d},e.paddingInner=function(a){return arguments.length?(d=Math.min(1,a),m()):d},e.paddingOuter=function(a){return arguments.length?(h=+a,m()):h},e.align=function(a){return arguments.length?(g=Math.max(0,Math.min(1,a)),m()):g},e.copy=function(){return U(t(),[n,s]).round(l).paddingInner(d).paddingOuter(h).align(g)},G.apply(m(),arguments)}const B=x(null),F=x("ODA"),T=x(".2s"),K=x(null),P=x(null),b=x(!1),C=x(0),X=()=>{const[e,t]=A(B),r=[{Country:"United States",ODA:64.69,ODAPercent:.0024},{Country:"Germany",ODA:37.9,ODAPercent:.0082},{Country:"Japan",ODA:19.6,ODAPercent:.0044},{Country:"United Kingdom",ODA:19.07,ODAPercent:.0058},{Country:"France",ODA:15.05,ODAPercent:.0048},{Country:"Canada",ODA:7.97,ODAPercent:.0038},{Country:"Netherlands",ODA:7.36,ODAPercent:.0066},{Country:"Italy",ODA:6.12,ODAPercent:.0027},{Country:"Sweden",ODA:5.62,ODAPercent:.0093},{Country:"Norway",ODA:5.55,ODAPercent:.0109},{Country:"Switzerland",ODA:5.22,ODAPercent:.006},{Country:"Spain",ODA:3.88,ODAPercent:.0024},{Country:"Australia",ODA:3.25,ODAPercent:.0019},{Country:"Korea",ODA:3.16,ODAPercent:.0017},{Country:"Denmark",ODA:3.06,ODAPercent:.0073},{Country:"Ireland",ODA:2.82,ODAPercent:.0067},{Country:"Belgium",ODA:2.81,ODAPercent:.0044},{Country:"Poland",ODA:2.58,ODAPercent:.0033},{Country:"Austria",ODA:1.96,ODAPercent:.0038},{Country:"Finland",ODA:1.59,ODAPercent:.0054},{Country:"Czechia",ODA:.81,ODAPercent:.0024},{Country:"New Zealand",ODA:.76,ODAPercent:.0031},{Country:"Luxembourg",ODA:.58,ODAPercent:.0099},{Country:"Portugal",ODA:.53,ODAPercent:.0019},{Country:"Greece",ODA:.33,ODAPercent:.0014},{Country:"Hungary",ODA:.27,ODAPercent:.0013},{Country:"Lithuania",ODA:.21,ODAPercent:.003},{Country:"Slovak Republic",ODA:.18,ODAPercent:.0014},{Country:"Slovenia",ODA:.16,ODAPercent:.0024},{Country:"Iceland",ODA:.11,ODAPercent:.0035},{Country:"Estonia",ODA:.11,ODAPercent:.0028}];return j.useEffect(()=>{t(r)},[]),e},J=({xScale:e,innerHeight:t,tickFormat:r})=>e.ticks(4).map(n=>i.jsxs("g",{className:"tick",transform:`translate(${e(n)},0)`,children:[i.jsx("line",{x1:0,y1:0,x2:0,y2:t}),i.jsx("text",{style:{textAnchor:"middle"},y:t+5,dy:".71em",children:r(n)})]},n)),Q=({yScale:e})=>p(b)===!1?null:i.jsx(i.Fragment,{children:e.domain().map((r,n)=>i.jsx("g",{className:"tick",children:i.jsx("text",{style:{textAnchor:"end"},dy:".32em",x:-5,y:e(r)+e.bandwidth()/2,children:r})},n))}),Y=({graphId:e,data:t,xScale:r,yScale:n,xValue:s,yValue:o,toolTipFormat:c})=>{const[l,d]=A(P),[h,g]=A(K),m=p(b),[a,D]=A(C),f=u=>l===o(u)||h===o(u)||a===2&&o(u)==="United States"||a===5&&o(u)==="United States"?"green":"#D3D3D3",O=u=>l===o(u)||h===o(u)?"black":"transparent",y=I(t,s),w=u=>({onMouseOver:()=>g(u),onMouseOut:()=>g(null),onClick:()=>{l===null&&D(a+1),d(u)}});return t.map(u=>{const v=o(u);return i.jsxs("g",{...m?{}:w(v),style:{cursor:"pointer"},children:[i.jsx("rect",{x:0,y:n(o(u)),width:r(y),height:n.bandwidth(),fill:"transparent"}),i.jsx("rect",{className:"mark",x:0,y:n(o(u)),width:r(s(u)),height:n.bandwidth(),style:{fill:f(u)},children:i.jsx("title",{children:c(s(u))})},o(u)),i.jsx("text",{textAnchor:"right",x:r(s(u)),y:n(o(u))+13,style:{fill:O(u)},children:"- Your Guess"})]},v)})},Z=({innerWidth:e,innerHeight:t})=>p(C)<3?i.jsx("text",{className:"axis-label",x:e/2,y:t+60,textAnchor:"middle",children:"Billions of US Dollars"}):i.jsx("text",{className:"axis-label",x:e/2,y:t+60,textAnchor:"middle",children:"% of Gross National Income"}),q=({graphId:e,width:t,height:r,margin:n,data:s,yValue:o,xValue:c,siFormat:l,xAxisTickFormat:d})=>{const h=r-n.top-n.bottom,g=t-n.left-n.right,m=U().domain(s.map(o)).range([0,h]).paddingInner(.1),a=E().domain([0,I(s,c)]).range([0,g]);return p(b),i.jsx("svg",{width:t,height:r,children:i.jsxs("g",{transform:`translate(${n.left},${n.top})`,children:[i.jsx(J,{xScale:a,innerHeight:h,tickFormat:d}),i.jsx(Q,{yScale:m}),i.jsx(Z,{innerWidth:g,innerHeight:h}),i.jsx(Y,{data:s,xScale:a,yScale:m,xValue:c,yValue:o,toolTipFormat:d})]})})},_=()=>{const[e,t]=A(b),[r,n]=A(C),[s,o]=A(P),[c,l]=A(B),[d,h]=A(F),[g,m]=A(T),a=()=>{r===1&&(t(!0),n(r+1)),r===2&&(t(!1),o(null),l(c.slice().sort((D,f)=>H(D.ODAPercent,f.ODAPercent))),h("ODAPercent"),m(".1%"),n(r+1)),r===4&&(t(!0),n(r+1))};switch(r){case 0:return i.jsx("div",{children:i.jsx("button",{children:" Select a bar below first. "})});case 1:return i.jsx("div",{children:i.jsxs("button",{className:"pulse-element",onClick:a,children:[" ","Click to submit guess!"," "]})});case 2:return i.jsx("div",{children:i.jsxs("button",{className:"pulse-element",onClick:a,children:[" ","Click to consider a different context"," "]})});case 3:return i.jsx("div",{children:i.jsx("button",{children:" Select a bar first. "})});case 4:return i.jsx("div",{children:i.jsxs("button",{className:"pulse-element",onClick:a,children:[" ","Click me to submit your guess."," "]})});default:return null}},V=()=>{const e=p(C),t=p(P);switch(e){case 0:return i.jsx("h3",{children:"Below is a graph of the foreign aid given by various countries. Which bar do you think represents the United States?"});case 1:return i.jsx("h3",{children:"Below is a graph of the foreign aid given by various countries. Which bar do you think represents the United States?"});case 2:if(t==="United States")return i.jsx("h3",{children:"Correct! As the world's largest economy, it doesn't come as a surprise to you that the United States tops the foreign aid chart."});if(t!=="United States")return i.jsx("h3",{children:"Good guess, but when it comes to raw spending on foreign aid, the United States tops the charts!"});case 3:return i.jsx("h3",{children:"Below is a graph of the foreign aid given by the same countries, but this time as a % of each countries gross national income. Again, which bar do you think represents the United States?"});case 4:return i.jsx("h3",{children:"Below is a graph of the foreign aid given by the same countries, but this time as a % of each countries gross national income. Again, which bar do you think represents the United States?"});case 5:return i.jsx("h3",{children:"Despite being the worlds largest provider of foreign aid and despite all the controversy I read about in the news, I was surprised by how little US foreign aid is as a % of GNI."});default:return console.log("step default"),null}},ee=()=>{const[e,t]=j.useState({width:600,height:600});return j.useEffect(()=>{const r=()=>{const s=window.innerWidth-40,o=window.innerHeight*.7,c=600,l=600,d=350,h=Math.min(s,c),g=Math.max(Math.min(o,l),d);t({width:h,height:g})};return r(),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),e},te=e=>{const t=e<768;return{top:20,right:t?80:120,bottom:t?60:80,left:t?80:120}},ne=e=>e.Country,ae=()=>{const e=X(),{width:t,height:r}=ee(),n=te(t),s=l=>l[p(F)],o=R(p(T)),c=l=>o(l).replace("G","B").replace(".0","");return e?i.jsxs("div",{className:"container",children:[i.jsx(V,{}),i.jsx(_,{}),i.jsx(q,{width:t,height:r,margin:n,data:e,yValue:ne,xValue:s,siFormat:o,xAxisTickFormat:c})]}):i.jsx("pre",{children:"Data is Loading..."})};export{ae as default};
