import{r as f,j as t}from"./index-Dts3KoaT.js";import{S as E,r as C,a as k,b as v,u as b}from"./transform-CpLVCWXJ.js";import{c as $,l as M,a as P,t as G,b as H,e as I}from"./natural-DdaVZ8FR.js";import{f as R,l as O,m as W}from"./linear-DiM-0B3F.js";import"./path-CbwjOpE9.js";function B(e){return typeof e=="string"?new E([[document.querySelector(e)]],[document.documentElement]):new E([[e]],C)}const U=k(null),F=k(0),T=k(!1),S=k(!1),Y="/data/Federal Employment Data.csv",z=()=>{const[e,n]=v(U);return f.useEffect(()=>{$(Y,a=>(a.timestamp=new Date(a.Month),a.TotalNonFarm=+a.TotalNonFarm*1e3,a.Federal=+a.Federal*1e3,a)).then(a=>{n(a)})},[]),console.log(e),e},q=({xScale:e,innerHeight:n,tickFormat:o,tickOffset:a=3})=>e.ticks().map(s=>t.jsxs("g",{className:"tick no-select",transform:`translate(${e(s)},0)`,children:[t.jsx("line",{y2:n}),t.jsx("text",{style:{textAnchor:"middle"},dy:".71em",y:n+a,children:o(s)})]},s)),Q=({yScale:e,innerWidth:n,tickFormat:o,tickOffset:a=3})=>e.ticks().map(s=>t.jsxs("g",{className:"tick no-select",transform:`translate(0,${e(s)})`,children:[t.jsx("line",{x2:n}),t.jsx("text",{style:{textAnchor:"end"},x:-a,dy:".32em",children:o(s)},s)]})),X=({data:e,xScale:n,yScale:o,xValue:a,yValue:s,tooltipFormat:u,circleRadius:h})=>{const d=f.useRef(),i=M().x(r=>n(a(r))).y(r=>o(s(r))).curve(P);return f.useEffect(()=>{if(!d.current)return;const r=B(d.current),x=r.node().getTotalLength();return r.attr("stroke-dasharray",x).attr("stroke-dashoffset",x),r.transition().duration(2e3).attr("stroke-dashoffset",0),()=>{r.interrupt()}},[e,n,o,a,s,h]),t.jsx("g",{className:"marks",children:t.jsx("path",{ref:d,fill:"none",stroke:"black",strokeWidth:"4",d:i(e)})})},J=({children:e,width:n,height:o,centerX:a,centerY:s,isDraggable:u})=>t.jsx("svg",{width:n,height:o,children:t.jsx("g",{transform:`translate(${a}, ${s})`,children:e})}),A=({x1:e,y1:n,x2:o,y2:a,x3:s,y3:u,id:h})=>{const[d,i]=f.useState(!1),[r,x]=f.useState(.2),[y,c]=v(T),j=b(S),[w,g]=v(F),m=`${e},${n} ${o},${a} ${s},${u}`;f.useEffect(()=>{if(!y){const _=setInterval(()=>{x(L=>L===.2?.4:.2)},750);return()=>clearInterval(_)}},[y]);const l=()=>{i(!0)},p=()=>{g(h),console.log("Guess:",h),c(!0)},D=()=>d||h===w?.6:y?j?0:.2:r;return t.jsx("polygon",{className:h,points:m,fill:"green",opacity:D(),stroke:"white",strokeWidth:"1.5",onMouseEnter:j?null:l,onMouseLeave:()=>i(!1),onClick:j?null:p,style:{cursor:"pointer",pointerEvents:"all",transition:"opacity .75s ease"}})},K=()=>{const e=b(F);return t.jsxs("h2",{children:["Since 1960, US Federal Employment as a % of the Labor Force has been"," ",t.jsx("span",{style:{color:"green",textDecoration:"underline"},children:e||"____________"}),"?"]})},Z=()=>{const[e,n]=v(S),o=b(T),s=o?e?"submitted":"ready":"idle",u={idle:{text:"Select a region below first.",className:"",onClick:()=>{}},ready:{text:"Click to submit guess!",className:"pulse-element",onClick:()=>n(!0)},submitted:{text:"Guess submitted!",className:"",onClick:()=>{}}};return t.jsx("div",{children:s!=="submitted"&&t.jsx("button",{className:u[s].className,onClick:u[s].onClick,children:u[s].text})})},V=()=>{const n=b(F)==="Generally Decreasing"?"That's right! ":"I too was surprised to learn that:";return t.jsxs(t.Fragment,{children:[t.jsx("h2",{children:n}),t.jsx("h2",{children:"Since the 1960s, the number of federal employees has been declining relative to overall employment."}),t.jsxs("p",{children:[" ","The source of this data is the US Bureau of Labor Statistics as served by FRED:"]}),t.jsx("p",{children:t.jsx("a",{href:"https://fred.stlouisfed.org/series/PAYEMS",target:"_blank",children:"Total Nonfarm Payroll Employment"})}),t.jsx("p",{children:t.jsx("a",{href:"https://fred.stlouisfed.org/series/CES9091000001",target:"_blank",children:"Total Federal Payroll Employment"})})]})},tt=()=>{const[e,n]=f.useState({width:960,height:500});return f.useEffect(()=>{const o=()=>{const s=window.innerWidth-40,u=window.innerHeight*.6,h=960,d=500,i=300,r=Math.min(s,h),x=Math.max(Math.min(u,d),i);n({width:r,height:x})};return o(),window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[]),e},et=e=>{const n=e<768;return{top:20,right:n?20:30,bottom:n?50:65,left:n?60:90}},N=252,it=()=>{const e=z(),n=b(S),{width:o,height:a}=tt(),s=et(o),u=o<768?40:50,h=o<768?35:45;if(!e)return t.jsx("pre",{children:"Data is Loading..."});const d=a-s.top-s.bottom,i=o-s.left-s.right,r=p=>p.timestamp,x=G("%Y"),y="Time",c=p=>p.Federal/p.TotalNonFarm,j=R(".0%"),w="Percent",g=H().domain(I(e,r)).range([0,i]).nice(),m=O().domain([0,W(e,c)+.01]).range([d,0]).nice(),l=e[N-1];return t.jsxs("div",{className:"container",children:[t.jsx(K,{}),t.jsxs(J,{width:o,height:a,centerX:s.left,centerY:s.top,isDraggable:!0,children:[t.jsx(q,{xScale:g,innerHeight:d,tickFormat:x,tickOffset:7}),t.jsx("text",{className:"axis-label no-select",textAnchor:"middle",transform:`translate(${-h},${d/2}) rotate(-90)`,children:w}),t.jsx(Q,{yScale:m,innerWidth:i,tickFormat:j,tickOffset:7}),t.jsx("text",{className:"axis-label no-select",x:i/2,y:d+u,textAnchor:"middle",children:y}),t.jsx(X,{data:n?e:e.slice(0,N),xScale:g,yScale:m,xValue:r,yValue:c,tooltipFormat:x,circleRadius:3}),t.jsx(A,{x1:g(r(l)),y1:m(c(l)),x2:i,y2:m(c(l)+.015),x3:i,y3:m(c(l)-.015),id:"Generally Flat"}),t.jsx(A,{x1:g(r(l)),y1:m(c(l)),x2:i,y2:m(c(l)-.015),x3:i,y3:m(c(l)-3*.015),id:"Generally Decreasing"}),t.jsx(A,{x1:g(r(l)),y1:m(c(l)),x2:i,y2:m(c(l)+3*.015),x3:i,y3:m(c(l)+.015),id:"Generally Increasing"})]}),n?t.jsx(V,{}):t.jsx(Z,{})]})};export{it as default};
