import{r as A,j as e}from"./index-DjYihzQ-.js";function F({optionAName:j,optionBName:v,setOptionAName:m,setOptionBName:D,rows:g,addRow:f,deleteRow:b,updateRow:N,activeRowId:p,setActiveRowId:t,reorderRows:h}){const[d,x]=A.useState(null),[a,s]=A.useState(null),i=(n,o)=>{x(o),n.dataTransfer.effectAllowed="move"},r=(n,o)=>{n.preventDefault(),d!==null&&d!==o&&s(o)},l=()=>{d!==null&&a!==null&&h(d,a),x(null),s(null)};return e.jsxs("div",{className:"comparison-table",children:[e.jsx("h2",{children:"Compare the Facts"}),e.jsx("p",{className:"step-description",children:"List the objective differences between your options (salary, commute time, etc.)"}),e.jsxs("div",{className:"table-headers",children:[e.jsx("span",{children:"⇅"}),e.jsx("span",{children:"Category"}),e.jsx("input",{type:"text",value:j,onChange:n=>m(n.target.value),placeholder:"e.g. Startup Job"}),e.jsx("input",{type:"text",value:v,onChange:n=>D(n.target.value),placeholder:"e.g. Current Job"}),e.jsx("span",{})]}),g.map((n,o)=>{const u={category:"Category",optionA:"Value",optionB:"Value"};return e.jsxs("div",{className:`table-row ${p===n.id?"active":""} ${d===o?"dragging":""} ${a===o?"drag-over":""}`,onClick:()=>t(n.id),draggable:!0,onDragStart:c=>i(c,o),onDragOver:c=>r(c,o),onDragEnd:l,children:[e.jsx("div",{className:"drag-handle",title:"Drag to reorder",children:"⋮⋮"}),e.jsx("input",{type:"text",value:n.category,onChange:c=>N(n.id,{category:c.target.value}),onFocus:()=>t(n.id),placeholder:u.category,onClick:c=>c.stopPropagation()}),e.jsx("input",{type:"text",value:n.optionA,onChange:c=>N(n.id,{optionA:c.target.value}),onFocus:()=>t(n.id),placeholder:u.optionA,onClick:c=>c.stopPropagation()}),e.jsx("input",{type:"text",value:n.optionB,onChange:c=>N(n.id,{optionB:c.target.value}),onFocus:()=>t(n.id),placeholder:u.optionB,onClick:c=>c.stopPropagation()}),e.jsx("button",{onClick:c=>{c.stopPropagation(),b(n.id)},title:"Delete row",children:"×"})]},n.id)}),e.jsx("button",{className:"add-row-button",onClick:f,children:"+ Add Category"})]})}function I({rows:j,updateSliderData:v}){const[m,D]=A.useState({isDragging:!1,rowId:null,sliderType:null,markerType:null}),g=A.useRef(new Map),f=(t,h)=>{const d=h.getBoundingClientRect(),x=t.clientX-d.left;return Math.max(0,Math.min(1,x/d.width))},b=(t,h,d,x)=>{t.preventDefault(),t.target.setPointerCapture(t.pointerId),D({isDragging:!0,rowId:h,sliderType:d,markerType:x})},N=(t,h,d)=>{var o,u,c,k;if(!m.isDragging||m.rowId!==h||m.sliderType!==d)return;const x=g.current.get(`${h}-${d}`);if(!x)return;const a=f(t,x),s=j.find(C=>C.id===h);if(!s)return;const i=((o=s.sliderData)==null?void 0:o.joyA)??.5,r=((u=s.sliderData)==null?void 0:u.joyB)??.5,l=((c=s.sliderData)==null?void 0:c.valueA)??.5,n=((k=s.sliderData)==null?void 0:k.valueB)??.5;d==="joy"?m.markerType==="a"?v(h,a,r,l,n):v(h,i,a,l,n):m.markerType==="a"?v(h,i,r,a,n):v(h,i,r,l,a)},p=t=>{m.isDragging&&(t.target.releasePointerCapture(t.pointerId),D({isDragging:!1,rowId:null,sliderType:null,markerType:null}))};return e.jsxs("div",{className:"component-sliders",children:[e.jsx("h2",{children:"Rate Each Component"}),e.jsx("p",{className:"step-description",children:"For each category, position the markers to show how each option feels and its importance"}),e.jsxs("div",{className:"slider-section",children:[e.jsx("h3",{className:"slider-section-title",children:"How does it make you feel?"}),e.jsxs("div",{className:"slider-axis-labels",children:[e.jsx("span",{children:"Ugh!"}),e.jsx("span",{children:"Sparks Joy!"})]}),j.map(t=>{var x,a;const h=((x=t.sliderData)==null?void 0:x.joyA)??.5,d=((a=t.sliderData)==null?void 0:a.joyB)??.5;return e.jsxs("div",{className:"slider-row",children:[e.jsx("div",{className:"slider-label",children:t.category||"Untitled"}),e.jsxs("div",{className:"slider-track",ref:s=>{s&&g.current.set(`${t.id}-joy`,s)},onPointerMove:s=>N(s,t.id,"joy"),onPointerUp:p,onPointerLeave:p,children:[e.jsx("div",{className:"slider-line"}),e.jsx("div",{className:"slider-tick",style:{left:"25%"}}),e.jsx("div",{className:"slider-tick slider-tick-middle",style:{left:"50%"},children:e.jsx("span",{className:"tick-label",children:"Neutral"})}),e.jsx("div",{className:"slider-tick",style:{left:"75%"}}),e.jsx("div",{className:"slider-marker marker-a",style:{left:`${h*100}%`},onPointerDown:s=>b(s,t.id,"joy","a"),children:e.jsx("div",{className:"marker-label",children:t.optionA||"A"})}),e.jsx("div",{className:"slider-marker marker-b",style:{left:`${d*100}%`},onPointerDown:s=>b(s,t.id,"joy","b"),children:e.jsx("div",{className:"marker-label",children:t.optionB||"B"})})]})]},`joy-${t.id}`)})]}),e.jsxs("div",{className:"slider-section",children:[e.jsx("h3",{className:"slider-section-title",children:"How valuable is this factor?"}),e.jsxs("div",{className:"slider-axis-labels",children:[e.jsx("span",{children:"Low Value"}),e.jsx("span",{children:"High Value"})]}),j.map(t=>{var x,a;const h=((x=t.sliderData)==null?void 0:x.valueA)??.5,d=((a=t.sliderData)==null?void 0:a.valueB)??.5;return e.jsxs("div",{className:"slider-row",children:[e.jsx("div",{className:"slider-label",children:t.category||"Untitled"}),e.jsxs("div",{className:"slider-track",ref:s=>{s&&g.current.set(`${t.id}-value`,s)},onPointerMove:s=>N(s,t.id,"value"),onPointerUp:p,onPointerLeave:p,children:[e.jsx("div",{className:"slider-line"}),e.jsx("div",{className:"slider-tick",style:{left:"25%"}}),e.jsx("div",{className:"slider-tick slider-tick-middle",style:{left:"50%"}}),e.jsx("div",{className:"slider-tick",style:{left:"75%"}}),e.jsx("div",{className:"slider-marker marker-a",style:{left:`${h*100}%`},onPointerDown:s=>b(s,t.id,"value","a"),children:e.jsx("div",{className:"marker-label",children:t.optionA||"A"})}),e.jsx("div",{className:"slider-marker marker-b",style:{left:`${d*100}%`},onPointerDown:s=>b(s,t.id,"value","b"),children:e.jsx("div",{className:"marker-label",children:t.optionB||"B"})})]})]},`value-${t.id}`)})]})]})}function z({optionAName:j,optionBName:v,rows:m}){const p=A.useMemo(()=>{const i=m.filter(y=>y.sliderData);if(i.length===0)return null;const r=i.map(y=>{const B=y.sliderData;return{id:y.id,category:y.category,dx:(B.valueB-B.valueA)*2,dy:(B.joyB-B.joyA)*2}});let l=0,n=0;const o=r.map(y=>{const B=l,W=n;return l+=y.dx,n+=y.dy,{id:y.id,category:y.category,startX:B,startY:W,endX:l,endY:n}}),u={x:l,y:n},c=[0,...o.map(y=>y.endX)],k=[0,...o.map(y=>y.endY)],C=Math.min(...c),Y=Math.max(...c),S=Math.min(...k),R=Math.max(...k),T=Y-C,V=R-S,M=.2,E=C-T*M,H=Y+T*M,O=S-V*M,U=R+V*M,P=H-E,X=U-O,$=Math.max(P,X),J=E-($-P)/2,w=H+($-P)/2,L=O-($-X)/2,G=U+($-X)/2;return{positions:o,aggregateEnd:u,bounds:{minX:J,maxX:w,minY:L,maxY:G,range:$}}},[m]),t=(i,r)=>{if(!p)return{x:0,y:0};const{bounds:l}=p,n=60+(i-l.minX)/l.range*480,o=540-(r-l.minY)/l.range*480;return{x:n,y:o}};if(!p||p.positions.length===0)return e.jsxs("div",{className:"value-joy-chart",children:[e.jsx("h2",{children:"See the Big Picture"}),e.jsx("p",{className:"instruction-text",children:"Rate at least one category using the sliders above to see the vector addition"})]});const{positions:h,aggregateEnd:d,bounds:x}=p,a=t(0,0),s=t(d.x,d.y);return e.jsxs("div",{className:"value-joy-chart",children:[e.jsx("h2",{children:"See the Big Picture"}),e.jsx("p",{className:"step-description",children:"All your categories combined into a single comparison vector"}),e.jsxs("p",{className:"instruction-text",children:["The aggregate line shows the overall difference between ",j," and ",v]}),e.jsx("div",{className:"chart-container",children:e.jsxs("svg",{className:"chart-svg",viewBox:"0 0 600 600",children:[[0,.25,.5,.75,1].map(i=>{const r=x.minX+i*x.range,l=x.minY+i*x.range,n=t(r,0).x,o=t(0,l).y;return e.jsxs("g",{children:[e.jsx("line",{className:"grid-line",x1:n,y1:60,x2:n,y2:540}),e.jsx("line",{className:"grid-line",x1:60,y1:o,x2:540,y2:o})]},`grid-${i}`)}),e.jsx("line",{className:"axis-line",x1:a.x,y1:60,x2:a.x,y2:540}),e.jsx("line",{className:"axis-line",x1:60,y1:a.y,x2:540,y2:a.y}),e.jsx("text",{className:"axis-label",x:20,y:540,textAnchor:"middle",transform:"rotate(-90, 20, 540)",children:"Less Joy"}),e.jsx("text",{className:"axis-label",x:20,y:a.y,textAnchor:"middle",transform:`rotate(-90, 20, ${a.y})`,children:"Equal"}),e.jsx("text",{className:"axis-label",x:20,y:60,textAnchor:"middle",transform:"rotate(-90, 20, 60)",children:"More Joy"}),e.jsx("text",{className:"axis-label",x:60,y:580,textAnchor:"middle",children:"Less Valuable"}),e.jsx("text",{className:"axis-label",x:a.x,y:580,textAnchor:"middle",children:"Equal"}),e.jsx("text",{className:"axis-label",x:540,y:580,textAnchor:"middle",children:"More Valuable"}),h.map(i=>{const r=t(i.startX,i.startY),l=t(i.endX,i.endY),n=(r.x+l.x)/2,o=(r.y+l.y)/2,u=Math.atan2(l.y-r.y,l.x-r.x)*180/Math.PI,k=u>90||u<-90?u+180:u;return e.jsxs("g",{opacity:.5,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:`vec-gradient-${i.id}`,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#4a90e2"}),e.jsx("stop",{offset:"100%",stopColor:"#ff8c42"})]})}),e.jsx("line",{className:"connecting-line",x1:r.x,y1:r.y,x2:l.x,y2:l.y,stroke:`url(#vec-gradient-${i.id})`}),e.jsx("text",{className:"category-label",x:n,y:o+-8,textAnchor:"middle",transform:`rotate(${k}, ${n}, ${o})`,children:i.category}),e.jsx("circle",{className:"dot option-a",cx:r.x,cy:r.y,r:4}),e.jsx("circle",{className:"dot option-b",cx:l.x,cy:l.y,r:4})]},i.id)}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"aggregate-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#4a90e2"}),e.jsx("stop",{offset:"100%",stopColor:"#ff8c42"})]})}),e.jsx("line",{className:"connecting-line aggregate-line",x1:a.x,y1:a.y,x2:s.x,y2:s.y,stroke:"url(#aggregate-gradient)",strokeWidth:"4"}),(()=>{const i=(a.x+s.x)/2,r=(a.y+s.y)/2,l=Math.atan2(s.y-a.y,s.x-a.x)*180/Math.PI,o=l>90||l<-90?l+180:l;return e.jsx("text",{className:"category-label aggregate-label",x:i,y:r+-12,textAnchor:"middle",transform:`rotate(${o}, ${i}, ${r})`,children:"Aggregate"})})(),e.jsx("circle",{className:"dot option-a",cx:a.x,cy:a.y,r:6}),e.jsx("circle",{className:"dot option-b",cx:s.x,cy:s.y,r:6}),e.jsx("text",{className:"endpoint-label",x:a.x,y:a.y-12,textAnchor:"middle",children:j}),e.jsx("text",{className:"endpoint-label",x:s.x,y:s.y-12,textAnchor:"middle",children:v})]})})]})}function K(){const[j,v]=A.useState("Current Job"),[m,D]=A.useState("New Job"),[g,f]=A.useState([{id:"1",category:"Compensation",optionA:"$50",optionB:"$45k",sliderData:{joyA:.55,joyB:.5,valueA:.6,valueB:.5}},{id:"2",category:"Tech",optionA:"Legacy",optionB:"Modern Greenfield",sliderData:{joyA:.5,joyB:.8,valueA:.3,valueB:.7}},{id:"3",category:"People",optionA:"Kind of Toxic",optionB:"Smart",sliderData:{joyA:.2,joyB:.6,valueA:.7,valueB:.5}}]),[b,N]=A.useState(null),p=()=>{const a={id:Date.now().toString(),category:"",optionA:"",optionB:""};f([...g,a])},t=a=>{f(g.filter(s=>s.id!==a)),b===a&&N(null)},h=(a,s)=>{f(g.map(i=>i.id===a?{...i,...s}:i))},d=(a,s,i,r,l)=>{f(g.map(n=>n.id===a?{...n,sliderData:{joyA:s,joyB:i,valueA:r,valueB:l}}:n))},x=(a,s)=>{const i=[...g],[r]=i.splice(a,1);i.splice(s,0,r),f(i)};return e.jsxs("div",{className:"decision-tool",children:[e.jsxs("header",{children:[e.jsx("h1",{children:"Decision Component Analyzer"}),e.jsx("p",{className:"subtitle",children:"Break down complex decisions into manageable components."}),e.jsx("p",{className:"intro-text",children:"Analyze decisions by breaking them into individual factors and visualizing how each component contributes to the overall choice."})]}),e.jsxs("div",{className:"tool-container",children:[e.jsx(F,{optionAName:j,optionBName:m,setOptionAName:v,setOptionBName:D,rows:g,addRow:p,deleteRow:t,updateRow:h,activeRowId:b,setActiveRowId:N,reorderRows:x}),e.jsx(I,{rows:g,updateSliderData:d}),e.jsx(z,{optionAName:j,optionBName:m,rows:g})]}),e.jsxs("footer",{className:"tool-footer",children:[e.jsxs("div",{className:"insight-tip",children:[e.jsxs("p",{style:{fontStyle:"italic",marginBottom:"0.5rem"},children:[e.jsx("strong",{children:"Still unsure?"})," Try using the tool again with different scenarios:"]}),e.jsxs("ul",{style:{textAlign:"left",maxWidth:"600px",margin:"0 auto",paddingLeft:"1.5rem"},children:[e.jsx("li",{children:"Fill everything out assuming the best-case scenario, then the worst-case"}),e.jsx("li",{children:"Assume the best for one option and the worst for the other"})]}),e.jsx("p",{style:{fontStyle:"italic",marginTop:"0.5rem"},children:"The goal isn't always to find the optimal choice, but to gain new insights about what matters most to you."})]}),e.jsxs("p",{style:{marginTop:"1.5rem"},children:["Inspired by"," ",e.jsx("a",{href:"https://labs.davidbauer.ch/priority-compass/",target:"_blank",rel:"noopener noreferrer",children:"Priority Compass"})]})]})]})}export{K as default};
