import{r as a,j as e}from"./index-Bo6LPt2A.js";const f="https://www.fueleconomy.gov/ws/rest";async function ie(){try{const r=await(await fetch(`${f}/vehicle/menu/year`,{headers:{Accept:"application/json"}})).json();return r.menuItem?r.menuItem.map(c=>parseInt(c.value)):[]}catch(n){return console.error("Error fetching years:",n),[]}}async function re(n){try{const c=await(await fetch(`${f}/vehicle/menu/make?year=${n}`,{headers:{Accept:"application/json"}})).json();return c.menuItem?Array.isArray(c.menuItem)?c.menuItem:[c.menuItem]:[]}catch(r){return console.error("Error fetching makes:",r),[]}}async function ce(n,r){try{const u=await(await fetch(`${f}/vehicle/menu/model?year=${n}&make=${r}`,{headers:{Accept:"application/json"}})).json();return u.menuItem?Array.isArray(u.menuItem)?u.menuItem:[u.menuItem]:[]}catch(c){return console.error("Error fetching models:",c),[]}}async function le(n,r,c){try{const h=await(await fetch(`${f}/vehicle/menu/options?year=${n}&make=${r}&model=${c}`,{headers:{Accept:"application/json"}})).json();return h.menuItem?Array.isArray(h.menuItem)?h.menuItem:[h.menuItem]:[]}catch(u){return console.error("Error fetching vehicle options:",u),[]}}async function oe(n){try{return await(await fetch(`${f}/vehicle/${n}`,{headers:{Accept:"application/json"}})).json()}catch(r){return console.error("Error fetching vehicle:",r),null}}async function de(){try{return await(await fetch(`${f}/fuelprices`,{headers:{Accept:"application/json"}})).json()}catch(n){return console.error("Error fetching fuel prices:",n),null}}function he(){const[n,r]=a.useState([]),[c,u]=a.useState([]),[h,E]=a.useState([]),[P,M]=a.useState([]),[I,N]=a.useState([]),[o,W]=a.useState(""),[m,L]=a.useState(""),[j,A]=a.useState(""),[w,b]=a.useState(""),[$,T]=a.useState(!1),[F,V]=a.useState(!0),[Y,G]=a.useState(!1),[R,D]=a.useState(!1),[H,O]=a.useState(!1),[l,_]=a.useState(null),[d,K]=a.useState({}),[x,U]=a.useState(12e3),[y,B]=a.useState(55);a.useEffect(()=>{q(),z()},[]),a.useEffect(()=>{o&&(L(""),A(""),b(""),E([]),M([]),N([]),J(parseInt(o)))},[o]),a.useEffect(()=>{o&&m&&(A(""),b(""),M([]),N([]),Q(parseInt(o),m))},[o,m]),a.useEffect(()=>{o&&m&&j&&(b(""),N([]),X(parseInt(o),m,j))},[o,m,j]);async function q(){V(!0);const s=await ie();u(s.sort((t,i)=>i-t)),V(!1)}async function z(){const s=await de();_(s)}async function J(s){G(!0);const t=await re(s);E(t),G(!1)}async function Q(s,t){D(!0);const i=await ce(s,t);M(i),D(!1)}async function X(s,t,i){O(!0);const p=await le(s,t,i);N(p),O(!1)}async function Z(){if(!w){alert("Please select a vehicle configuration");return}T(!0);const s=parseInt(w),t=await oe(s);if(t){const i={id:t.id.toString(),make:t.make,model:t.model,year:t.year,mpgCity:t.city08,mpgHighway:t.highway08,mpgCombined:t.comb08,fuelType:t.fuelType1||t.fuelType,engine:`${t.displ||"N/A"}L ${t.cylinders||"N/A"}-cyl`};n.find(p=>p.id===i.id)?alert("This vehicle is already in your comparison"):r([...n,i])}T(!1)}function ee(s){r(n.filter(t=>t.id!==s))}function g(s){const t=s.toLowerCase();return t.includes("electric")||t.includes("electricity")}function S(s){return g(s)?"MPGe":"MPG"}function k(s){const t=(100-y)/100,i=y/100,p=1/(t/s.mpgCity+i/s.mpgHighway);return Math.round(p)}function se(s){const t=s.toLowerCase();return t.includes("premium")?"premium":t.includes("midgrade")||t.includes("mid-grade")?"midgrade":t.includes("diesel")?"diesel":t.includes("e85")?"e85":t.includes("electric")||t.includes("electricity")?"electric":t.includes("cng")?"cng":t.includes("lpg")?"lpg":"regular"}function v(s){const t=se(s),i=d[t];return i?parseFloat(i):l?parseFloat(l[t]):0}function te(s){const t=k(s);if(g(s.fuelType)){const i=v(s.fuelType),p=33.7/t*100;return x/100*p*i}else{const i=v(s.fuelType);return x/t*i}}function ae(s){const t=k(s);if(g(s.fuelType)){const i=v(s.fuelType);return 33.7/t*i}else return v(s.fuelType)/t}function C(s,t){K({...d,[s]:t})}function ne(){K({}),U(12e3),B(55)}return e.jsxs("div",{className:"fuel-economy-app",children:[e.jsxs("header",{className:"project-header",children:[e.jsx("h1",{children:"Fuel Economy Comparison Tool"}),e.jsx("p",{className:"project-description",children:"Compare the fuel efficiency of different vehicles using data from public APIs. Select vehicles to see how they stack up in terms of city, highway, and combined MPG."})]}),e.jsxs("main",{className:"comparison-container",children:[l&&e.jsxs("section",{className:"gas-prices-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"Gas Prices & Settings"}),e.jsx("button",{onClick:ne,className:"reset-button",children:"Reset to Defaults"})]}),e.jsxs("div",{className:"gas-prices-grid",children:[e.jsxs("div",{className:"price-input-group",children:[e.jsx("label",{children:"Regular Gas"}),e.jsx("input",{type:"number",step:"0.01",placeholder:l.regular,value:d.regular||"",onChange:s=>C("regular",s.target.value),className:"price-input"}),e.jsxs("span",{className:"price-hint",children:["$",d.regular||l.regular,"/gal"]})]}),e.jsxs("div",{className:"price-input-group",children:[e.jsx("label",{children:"Premium Gas"}),e.jsx("input",{type:"number",step:"0.01",placeholder:l.premium,value:d.premium||"",onChange:s=>C("premium",s.target.value),className:"price-input"}),e.jsxs("span",{className:"price-hint",children:["$",d.premium||l.premium,"/gal"]})]}),e.jsxs("div",{className:"price-input-group",children:[e.jsx("label",{children:"Diesel"}),e.jsx("input",{type:"number",step:"0.01",placeholder:l.diesel,value:d.diesel||"",onChange:s=>C("diesel",s.target.value),className:"price-input"}),e.jsxs("span",{className:"price-hint",children:["$",d.diesel||l.diesel,"/gal"]})]}),e.jsxs("div",{className:"price-input-group",children:[e.jsx("label",{children:"Electricity"}),e.jsx("input",{type:"number",step:"0.01",placeholder:l.electric,value:d.electric||"",onChange:s=>C("electric",s.target.value),className:"price-input"}),e.jsxs("span",{className:"price-hint",children:["$",d.electric||l.electric,"/kWh"]})]}),e.jsxs("div",{className:"price-input-group",children:[e.jsx("label",{children:"Annual Miles"}),e.jsx("input",{type:"number",step:"1000",value:x,onChange:s=>U(parseInt(s.target.value)||12e3),className:"price-input"}),e.jsxs("span",{className:"price-hint",children:[x.toLocaleString()," mi/yr"]})]})]}),e.jsxs("div",{className:"driving-mix-section",children:[e.jsx("h3",{children:"Driving Mix"}),e.jsx("p",{className:"driving-mix-description",children:"Adjust the slider to match your typical driving habits. EPA standard is 55% highway, 45% city."}),e.jsxs("div",{className:"slider-container",children:[e.jsxs("div",{className:"slider-labels",children:[e.jsxs("span",{className:"slider-label-left",children:["City: ",100-y,"%"]}),e.jsxs("span",{className:"slider-label-right",children:["Highway: ",y,"%"]})]}),e.jsx("input",{type:"range",min:"0",max:"100",value:y,onChange:s=>B(parseInt(s.target.value)),className:"driving-mix-slider"}),e.jsxs("div",{className:"slider-markers",children:[e.jsx("span",{children:"0%"}),e.jsx("span",{children:"25%"}),e.jsx("span",{children:"50%"}),e.jsx("span",{children:"75%"}),e.jsx("span",{children:"100%"})]})]})]}),e.jsx("p",{className:"gas-prices-note",children:"National average prices shown. Edit any field to use your local prices."})]}),e.jsxs("section",{className:"vehicle-search",children:[e.jsx("h2",{children:"Search for Vehicles"}),e.jsxs("div",{className:"search-interface",children:[e.jsx("p",{children:"Select a vehicle to add to your comparison:"}),e.jsxs("div",{className:"search-controls",children:[e.jsxs("select",{value:o,onChange:s=>W(s.target.value),className:"vehicle-select",disabled:F,children:[e.jsx("option",{value:"",children:F?"Loading years...":"Select Year"}),c==null?void 0:c.map(s=>e.jsx("option",{value:s,children:s},s))]}),e.jsxs("select",{value:m,onChange:s=>L(s.target.value),className:"vehicle-select",disabled:!o||Y,children:[e.jsx("option",{value:"",children:Y?"Loading makes...":"Select Make"}),h==null?void 0:h.map(s=>e.jsx("option",{value:s.value,children:s.text},s.value))]}),e.jsxs("select",{value:j,onChange:s=>A(s.target.value),className:"vehicle-select",disabled:!m||R,children:[e.jsx("option",{value:"",children:R?"Loading models...":"Select Model"}),P==null?void 0:P.map(s=>e.jsx("option",{value:s.value,children:s.text},s.value))]}),e.jsxs("select",{value:w,onChange:s=>b(s.target.value),className:"vehicle-select",disabled:!j||H,children:[e.jsx("option",{value:"",children:H?"Loading configurations...":"Select Configuration"}),I==null?void 0:I.map(s=>e.jsx("option",{value:s.value,children:s.text},s.value))]}),e.jsx("button",{className:"search-button",onClick:Z,disabled:!w||$,children:$?"Adding...":"Add Vehicle"})]})]})]}),n.length>0&&e.jsxs("section",{className:"comparison-results",children:[e.jsx("h2",{children:"Vehicle Comparison"}),e.jsx("div",{className:"comparison-grid",children:n.map(s=>e.jsxs("div",{className:"vehicle-card",children:[e.jsxs("div",{className:"vehicle-card-header",children:[e.jsxs("h3",{children:[s.year," ",s.make," ",s.model]}),e.jsx("button",{className:"remove-button",onClick:()=>ee(s.id),title:"Remove vehicle",children:"Ã—"})]}),e.jsxs("div",{className:"mpg-stats",children:[e.jsxs("div",{className:"mpg-stat",children:[e.jsxs("label",{children:["City ",S(s.fuelType),":"]}),e.jsx("span",{children:s.mpgCity})]}),e.jsxs("div",{className:"mpg-stat",children:[e.jsxs("label",{children:["Highway ",S(s.fuelType),":"]}),e.jsx("span",{children:s.mpgHighway})]}),e.jsxs("div",{className:"mpg-stat",children:[e.jsxs("label",{children:["EPA Combined ",S(s.fuelType),":"]}),e.jsx("span",{children:s.mpgCombined})]}),e.jsxs("div",{className:"mpg-stat mpg-stat-custom",children:[e.jsxs("label",{children:["Your Combined ",S(s.fuelType),":"]}),e.jsx("span",{className:"custom-mpg",children:k(s)})]})]}),e.jsxs("div",{className:"vehicle-details",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Fuel Type:"})," ",s.fuelType]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Engine:"})," ",s.engine]})]}),l&&e.jsxs("div",{className:"cost-stats",children:[e.jsxs("div",{className:"cost-stat",children:[e.jsx("label",{children:g(s.fuelType)?"Electricity Price:":"Fuel Price:"}),e.jsxs("span",{children:["$",v(s.fuelType).toFixed(2),g(s.fuelType)?"/kWh":"/gal"]})]}),e.jsxs("div",{className:"cost-stat",children:[e.jsx("label",{children:"Cost per Mile:"}),e.jsxs("span",{children:["$",ae(s).toFixed(3)]})]}),e.jsxs("div",{className:"cost-stat-highlight",children:[e.jsxs("label",{children:["Annual ",g(s.fuelType)?"Electricity":"Fuel"," Cost:"]}),e.jsxs("span",{className:"cost-amount",children:["$",te(s).toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})]})]}),e.jsxs("p",{className:"cost-note",children:["Based on ",x.toLocaleString()," miles/year"]})]})]},s.id))})]}),n.length===0&&e.jsx("section",{className:"empty-state",children:e.jsx("p",{children:"Search for vehicles above to start comparing their fuel economy."})})]})]})}export{he as default};
